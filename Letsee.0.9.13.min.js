!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Letsee",[],e):"object"==typeof exports?exports.Letsee=e():t.Letsee=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="./",n(n.s=20)}([function(t,e,n){"use strict";n.r(e),n.d(e,"Vector3",function(){return a});var r=n(1),i=n(3);function a(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}Object.assign(a.prototype,{isVector3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t=new i.Quaternion;return function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(t.setFromEuler(e))}}(),applyAxisAngle:function(){var t=new i.Quaternion;return function(e,n){return this.applyQuaternion(t.setFromAxisAngle(e,n))}}(),applyMatrix3:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements,a=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*a,this},applyQuaternion:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,a=t.y,o=t.z,s=t.w,u=s*e+a*r-o*n,c=s*n+o*e-i*r,l=s*r+i*n-a*e,h=-i*e-a*n-o*r;return this.x=u*s+h*-i+c*-o-l*-a,this.y=c*s+h*-a+l*-i-u*-o,this.z=l*s+h*-o+u*-a-c*-i,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var n=t.x,r=t.y,i=t.z,a=e.x,o=e.y,s=e.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t=new a;return function(e){return t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t=new a;return function(e){return this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(r._Math.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,n){var r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}})},function(t,e,n){"use strict";n.r(e),n.d(e,"_Math",function(){return r});var r={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var t=[],e=0;e<256;e++)t[e]=(e<16?"0":"")+e.toString(16);return function(){var e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(t[255&e]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+"-"+t[255&n]+t[n>>8&255]+"-"+t[n>>16&15|64]+t[n>>24&255]+"-"+t[63&r|128]+t[r>>8&255]+"-"+t[r>>16&255]+t[r>>24&255]+t[255&i]+t[i>>8&255]+t[i>>16&255]+t[i>>24&255]).toUpperCase()}}(),clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*r.DEG2RAD},radToDeg:function(t){return t*r.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}}},function(t,e,n){"use strict";n.r(e),n.d(e,"Matrix4",function(){return i});var r=n(0);function i(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(i.prototype,{isMatrix4:!0,set:function(t,e,n,r,i,a,o,s,u,c,l,h,f,d,p,y){var m=this.elements;return m[0]=t,m[4]=e,m[8]=n,m[12]=r,m[1]=i,m[5]=a,m[9]=o,m[13]=s,m[2]=u,m[6]=c,m[10]=l,m[14]=h,m[3]=f,m[7]=d,m[11]=p,m[15]=y,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new i).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(){var t=new r.Vector3;return function(e){var n=this.elements,r=e.elements,i=1/t.setFromMatrixColumn(e,0).length(),a=1/t.setFromMatrixColumn(e,1).length(),o=1/t.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*a,n[5]=r[5]*a,n[6]=r[6]*a,n[7]=0,n[8]=r[8]*o,n[9]=r[9]*o,n[10]=r[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}}(),makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,r=t.y,i=t.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),u=Math.sin(r),c=Math.cos(i),l=Math.sin(i);if("XYZ"===t.order){var h=a*c,f=a*l,d=o*c,p=o*l;e[0]=s*c,e[4]=-s*l,e[8]=u,e[1]=f+d*u,e[5]=h-p*u,e[9]=-o*s,e[2]=p-h*u,e[6]=d+f*u,e[10]=a*s}else if("YXZ"===t.order){var y=s*c,m=s*l,v=u*c,_=u*l;e[0]=y+_*o,e[4]=v*o-m,e[8]=a*u,e[1]=a*l,e[5]=a*c,e[9]=-o,e[2]=m*o-v,e[6]=_+y*o,e[10]=a*s}else if("ZXY"===t.order){y=s*c,m=s*l,v=u*c,_=u*l;e[0]=y-_*o,e[4]=-a*l,e[8]=v+m*o,e[1]=m+v*o,e[5]=a*c,e[9]=_-y*o,e[2]=-a*u,e[6]=o,e[10]=a*s}else if("ZYX"===t.order){h=a*c,f=a*l,d=o*c,p=o*l;e[0]=s*c,e[4]=d*u-f,e[8]=h*u+p,e[1]=s*l,e[5]=p*u+h,e[9]=f*u-d,e[2]=-u,e[6]=o*s,e[10]=a*s}else if("YZX"===t.order){var g=a*s,b=a*u,E=o*s,w=o*u;e[0]=s*c,e[4]=w-g*l,e[8]=E*l+b,e[1]=l,e[5]=a*c,e[9]=-o*c,e[2]=-u*c,e[6]=b*l+E,e[10]=g-w*l}else if("XZY"===t.order){g=a*s,b=a*u,E=o*s,w=o*u;e[0]=s*c,e[4]=-l,e[8]=u*c,e[1]=g*l+w,e[5]=a*c,e[9]=b*l-E,e[2]=E*l-b,e[6]=o*c,e[10]=w*l+g}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(){var t=new r.Vector3(0,0,0),e=new r.Vector3(1,1,1);return function(n){return this.compose(t,n,e)}}(),lookAt:function(){var t=new r.Vector3,e=new r.Vector3,n=new r.Vector3;return function(r,i,a){var o=this.elements;return n.subVectors(r,i),0===n.lengthSq()&&(n.z=1),n.normalize(),t.crossVectors(a,n),0===t.lengthSq()&&(1===Math.abs(a.z)?n.x+=1e-4:n.z+=1e-4,n.normalize(),t.crossVectors(a,n)),t.normalize(),e.crossVectors(n,t),o[0]=t.x,o[4]=e.x,o[8]=n.x,o[1]=t.y,o[5]=e.y,o[9]=n.y,o[2]=t.z,o[6]=e.z,o[10]=n.z,this}}(),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,a=n[0],o=n[4],s=n[8],u=n[12],c=n[1],l=n[5],h=n[9],f=n[13],d=n[2],p=n[6],y=n[10],m=n[14],v=n[3],_=n[7],g=n[11],b=n[15],E=r[0],w=r[4],x=r[8],S=r[12],T=r[1],M=r[5],R=r[9],O=r[13],k=r[2],A=r[6],C=r[10],P=r[14],W=r[3],j=r[7],z=r[11],I=r[15];return i[0]=a*E+o*T+s*k+u*W,i[4]=a*w+o*M+s*A+u*j,i[8]=a*x+o*R+s*C+u*z,i[12]=a*S+o*O+s*P+u*I,i[1]=c*E+l*T+h*k+f*W,i[5]=c*w+l*M+h*A+f*j,i[9]=c*x+l*R+h*C+f*z,i[13]=c*S+l*O+h*P+f*I,i[2]=d*E+p*T+y*k+m*W,i[6]=d*w+p*M+y*A+m*j,i[10]=d*x+p*R+y*C+m*z,i[14]=d*S+p*O+y*P+m*I,i[3]=v*E+_*T+g*k+b*W,i[7]=v*w+_*M+g*A+b*j,i[11]=v*x+_*R+g*C+b*z,i[15]=v*S+_*O+g*P+b*I,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(){var t=new r.Vector3;return function(e){for(var n=0,r=e.count;n<r;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix4(this),e.setXYZ(n,t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],a=t[1],o=t[5],s=t[9],u=t[13],c=t[2],l=t[6],h=t[10],f=t[14];return t[3]*(+i*s*l-r*u*l-i*o*h+n*u*h+r*o*f-n*s*f)+t[7]*(+e*s*f-e*u*h+i*a*h-r*a*f+r*u*c-i*s*c)+t[11]*(+e*u*l-e*o*f-i*a*l+n*a*f+i*o*c-n*u*c)+t[15]*(-r*o*c-e*s*l+e*o*h+r*a*l-n*a*h+n*s*c)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t,e,n){var r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this},getInverse:function(t,e){var n=this.elements,r=t.elements,i=r[0],a=r[1],o=r[2],s=r[3],u=r[4],c=r[5],l=r[6],h=r[7],f=r[8],d=r[9],p=r[10],y=r[11],m=r[12],v=r[13],_=r[14],g=r[15],b=d*_*h-v*p*h+v*l*y-c*_*y-d*l*g+c*p*g,E=m*p*h-f*_*h-m*l*y+u*_*y+f*l*g-u*p*g,w=f*v*h-m*d*h+m*c*y-u*v*y-f*c*g+u*d*g,x=m*d*l-f*v*l-m*c*p+u*v*p+f*c*_-u*d*_,S=i*b+a*E+o*w+s*x;if(0===S){var T="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(T);return console.warn(T),this.identity()}var M=1/S;return n[0]=b*M,n[1]=(v*p*s-d*_*s-v*o*y+a*_*y+d*o*g-a*p*g)*M,n[2]=(c*_*s-v*l*s+v*o*h-a*_*h-c*o*g+a*l*g)*M,n[3]=(d*l*s-c*p*s-d*o*h+a*p*h+c*o*y-a*l*y)*M,n[4]=E*M,n[5]=(f*_*s-m*p*s+m*o*y-i*_*y-f*o*g+i*p*g)*M,n[6]=(m*l*s-u*_*s-m*o*h+i*_*h+u*o*g-i*l*g)*M,n[7]=(u*p*s-f*l*s+f*o*h-i*p*h-u*o*y+i*l*y)*M,n[8]=w*M,n[9]=(m*d*s-f*v*s-m*a*y+i*v*y+f*a*g-i*d*g)*M,n[10]=(u*v*s-m*c*s+m*a*h-i*v*h-u*a*g+i*c*g)*M,n[11]=(f*c*s-u*d*s-f*a*h+i*d*h+u*a*y-i*c*y)*M,n[12]=x*M,n[13]=(f*v*o-m*d*o+m*a*p-i*v*p-f*a*_+i*d*_)*M,n[14]=(m*c*o-u*v*o-m*a*l+i*v*l+u*a*_-i*c*_)*M,n[15]=(u*d*o-f*c*o+f*a*l-i*d*l-u*a*p+i*c*p)*M,this},scale:function(t){var e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=1-n,a=t.x,o=t.y,s=t.z,u=i*a,c=i*o;return this.set(u*a+n,u*o-r*s,u*s+r*o,0,u*o+r*s,c*o+n,c*s-r*a,0,u*s-r*o,c*s+r*a,i*s*s+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){var r=this.elements,i=e._x,a=e._y,o=e._z,s=e._w,u=i+i,c=a+a,l=o+o,h=i*u,f=i*c,d=i*l,p=a*c,y=a*l,m=o*l,v=s*u,_=s*c,g=s*l,b=n.x,E=n.y,w=n.z;return r[0]=(1-(p+m))*b,r[1]=(f+g)*b,r[2]=(d-_)*b,r[3]=0,r[4]=(f-g)*E,r[5]=(1-(h+m))*E,r[6]=(y+v)*E,r[7]=0,r[8]=(d+_)*w,r[9]=(y-v)*w,r[10]=(1-(h+p))*w,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this},decompose:function(){var t=new r.Vector3,e=new i;return function(n,r,i){var a=this.elements,o=t.set(a[0],a[1],a[2]).length(),s=t.set(a[4],a[5],a[6]).length(),u=t.set(a[8],a[9],a[10]).length();this.determinant()<0&&(o=-o),n.x=a[12],n.y=a[13],n.z=a[14],e.copy(this);var c=1/o,l=1/s,h=1/u;return e.elements[0]*=c,e.elements[1]*=c,e.elements[2]*=c,e.elements[4]*=l,e.elements[5]*=l,e.elements[6]*=l,e.elements[8]*=h,e.elements[9]*=h,e.elements[10]*=h,r.setFromRotationMatrix(e),i.x=o,i.y=s,i.z=u,this}}(),makePerspective:function(t,e,n,r,i,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*i/(e-t),u=2*i/(n-r),c=(e+t)/(e-t),l=(n+r)/(n-r),h=-(a+i)/(a-i),f=-2*a*i/(a-i);return o[0]=s,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=u,o[9]=l,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=f,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(t,e,n,r,i,a){var o=this.elements,s=1/(e-t),u=1/(n-r),c=1/(a-i),l=(e+t)*s,h=(n+r)*u,f=(a+i)*c;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-l,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-f,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}})},function(t,e,n){"use strict";n.r(e),n.d(e,"Quaternion",function(){return i});var r=n(1);function i(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==r?r:1}Object.assign(i,{slerp:function(t,e,n,r){return n.copy(t).slerp(e,r)},slerpFlat:function(t,e,n,r,i,a,o){var s=n[r+0],u=n[r+1],c=n[r+2],l=n[r+3],h=i[a+0],f=i[a+1],d=i[a+2],p=i[a+3];if(l!==p||s!==h||u!==f||c!==d){var y=1-o,m=s*h+u*f+c*d+l*p,v=m>=0?1:-1,_=1-m*m;if(_>Number.EPSILON){var g=Math.sqrt(_),b=Math.atan2(g,m*v);y=Math.sin(y*b)/g,o=Math.sin(o*b)/g}var E=o*v;if(s=s*y+h*E,u=u*y+f*E,c=c*y+d*E,l=l*y+p*E,y===1-o){var w=1/Math.sqrt(s*s+u*u+c*c+l*l);s*=w,u*=w,c*=w,l*=w}}t[e]=s,t[e+1]=u,t[e+2]=c,t[e+3]=l}}),Object.defineProperties(i.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback()}}}),Object.assign(i.prototype,{isQuaternion:!0,set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,r=t._y,i=t._z,a=t.order,o=Math.cos,s=Math.sin,u=o(n/2),c=o(r/2),l=o(i/2),h=s(n/2),f=s(r/2),d=s(i/2);return"XYZ"===a?(this._x=h*c*l+u*f*d,this._y=u*f*l-h*c*d,this._z=u*c*d+h*f*l,this._w=u*c*l-h*f*d):"YXZ"===a?(this._x=h*c*l+u*f*d,this._y=u*f*l-h*c*d,this._z=u*c*d-h*f*l,this._w=u*c*l+h*f*d):"ZXY"===a?(this._x=h*c*l-u*f*d,this._y=u*f*l+h*c*d,this._z=u*c*d+h*f*l,this._w=u*c*l-h*f*d):"ZYX"===a?(this._x=h*c*l-u*f*d,this._y=u*f*l+h*c*d,this._z=u*c*d-h*f*l,this._w=u*c*l+h*f*d):"YZX"===a?(this._x=h*c*l+u*f*d,this._y=u*f*l+h*c*d,this._z=u*c*d-h*f*l,this._w=u*c*l-h*f*d):"XZY"===a&&(this._x=h*c*l-u*f*d,this._y=u*f*l-h*c*d,this._z=u*c*d+h*f*l,this._w=u*c*l+h*f*d),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,r=n[0],i=n[4],a=n[8],o=n[1],s=n[5],u=n[9],c=n[2],l=n[6],h=n[10],f=r+s+h;return f>0?(e=.5/Math.sqrt(f+1),this._w=.25/e,this._x=(l-u)*e,this._y=(a-c)*e,this._z=(o-i)*e):r>s&&r>h?(e=2*Math.sqrt(1+r-s-h),this._w=(l-u)/e,this._x=.25*e,this._y=(i+o)/e,this._z=(a+c)/e):s>h?(e=2*Math.sqrt(1+s-r-h),this._w=(a-c)/e,this._x=(i+o)/e,this._y=.25*e,this._z=(u+l)/e):(e=2*Math.sqrt(1+h-r-s),this._w=(o-i)/e,this._x=(a+c)/e,this._y=(u+l)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(t,e){var n=t.dot(e)+1;return n<1e-6?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(r._Math.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var n=this.angleTo(t);if(0===n)return this;var r=Math.min(1,e/n);return this.slerp(t,r),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,r=t._y,i=t._z,a=t._w,o=e._x,s=e._y,u=e._z,c=e._w;return this._x=n*c+a*o+r*u-i*s,this._y=r*c+a*s+i*o-n*u,this._z=i*c+a*u+n*s-r*o,this._w=a*c-n*o-r*s-i*u,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,r=this._y,i=this._z,a=this._w,o=a*t._w+n*t._x+r*t._y+i*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;var s=1-o*o;if(s<=Number.EPSILON){var u=1-e;return this._w=u*a+e*this._w,this._x=u*n+e*this._x,this._y=u*r+e*this._y,this._z=u*i+e*this._z,this.normalize()}var c=Math.sqrt(s),l=Math.atan2(c,o),h=Math.sin((1-e)*l)/c,f=Math.sin(e*l)/c;return this._w=a*h+this._w*f,this._x=n*h+this._x*f,this._y=r*h+this._y*f,this._z=i*h+this._z*f,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}})},function(t,e,n){"use strict";n.r(e);var r=n(3),i=n(0),a=n(2);function o(){}Object.assign(o.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var n=this._listeners[t];if(void 0!==n){var r=n.indexOf(e);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=e.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,t)}}}});var s=n(6);function u(){this.mask=1}function c(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(u.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},test:function(t){return 0!=(this.mask&t.mask)}}),Object.assign(c.prototype,{isMatrix3:!0,set:function(t,e,n,r,i,a,o,s,u){var c=this.elements;return c[0]=t,c[1]=r,c[2]=o,c[3]=e,c[4]=i,c[5]=s,c[6]=n,c[7]=a,c[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(){var t=new i.Vector3;return function(e){for(var n=0,r=e.count;n<r;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix3(this),e.setXYZ(n,t.x,t.y,t.z);return e}}(),multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,a=n[0],o=n[3],s=n[6],u=n[1],c=n[4],l=n[7],h=n[2],f=n[5],d=n[8],p=r[0],y=r[3],m=r[6],v=r[1],_=r[4],g=r[7],b=r[2],E=r[5],w=r[8];return i[0]=a*p+o*v+s*b,i[3]=a*y+o*_+s*E,i[6]=a*m+o*g+s*w,i[1]=u*p+c*v+l*b,i[4]=u*y+c*_+l*E,i[7]=u*m+c*g+l*w,i[2]=h*p+f*v+d*b,i[5]=h*y+f*_+d*E,i[8]=h*m+f*g+d*w,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],u=t[7],c=t[8];return e*a*c-e*o*u-n*i*c+n*o*s+r*i*u-r*a*s},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=t.elements,r=this.elements,i=n[0],a=n[1],o=n[2],s=n[3],u=n[4],c=n[5],l=n[6],h=n[7],f=n[8],d=f*u-c*h,p=c*l-f*s,y=h*s-u*l,m=i*d+a*p+o*y;if(0===m){var v="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(v);return console.warn(v),this.identity()}var _=1/m;return r[0]=d*_,r[1]=(o*h-f*a)*_,r[2]=(c*a-o*u)*_,r[3]=p*_,r[4]=(f*i-o*l)*_,r[5]=(o*s-c*i)*_,r[6]=y*_,r[7]=(a*l-h*i)*_,r[8]=(u*i-a*s)*_,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,n,r,i,a,o){var s=Math.cos(i),u=Math.sin(i);this.set(n*s,n*u,-n*(s*a+u*o)+a+t,-r*u,r*s,-r*(-u*a+s*o)+o+e,0,0,1)},scale:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=this.elements,i=r[0],a=r[3],o=r[6],s=r[1],u=r[4],c=r[7];return r[0]=e*i+n*s,r[3]=e*a+n*u,r[6]=e*o+n*c,r[1]=-n*i+e*s,r[4]=-n*a+e*u,r[7]=-n*o+e*c,this},translate:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}});var l=n(1);n.d(e,"Object3D",function(){return f});var h=0;function f(){Object.defineProperty(this,"id",{value:h++}),this.uuid=l._Math.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=f.DefaultUp.clone();var t=new i.Vector3,e=new s.Euler,n=new r.Quaternion,o=new i.Vector3(1,1,1);e.onChange(function(){n.setFromEuler(e,!1)}),n.onChange(function(){e.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new a.Matrix4},normalMatrix:{value:new c}}),this.matrix=new a.Matrix4,this.matrixWorld=new a.Matrix4,this.matrixAutoUpdate=f.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new u,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}f.DefaultUp=new i.Vector3(0,1,0),f.DefaultMatrixAutoUpdate=!0,f.prototype=Object.assign(Object.create(o.prototype),{constructor:f,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new r.Quaternion;return function(e,n){return t.setFromAxisAngle(e,n),this.quaternion.multiply(t),this}}(),rotateOnWorldAxis:function(){var t=new r.Quaternion;return function(e,n){return t.setFromAxisAngle(e,n),this.quaternion.premultiply(t),this}}(),rotateX:function(){var t=new i.Vector3(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new i.Vector3(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new i.Vector3(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new i.Vector3;return function(e,n){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(n)),this}}(),translateX:function(){var t=new i.Vector3(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new i.Vector3(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new i.Vector3(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new a.Matrix4;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new r.Quaternion,e=new a.Matrix4,n=new i.Vector3,o=new i.Vector3;return function(r,i,a){r.isVector3?n.copy(r):n.set(r,i,a);var s=this.parent;this.updateWorldMatrix(!0,!1),o.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?e.lookAt(o,n,this.up):e.lookAt(n,o,this.up),this.quaternion.setFromRotationMatrix(e),s&&(e.extractRotation(s.matrixWorld),t.setFromRotationMatrix(e),this.quaternion.premultiply(t.inverse()))}}(),add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var n=this.children.indexOf(t);return-1!==n&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(n,1)),this},attach:function(){var t=new a.Matrix4;return function(e){return this.updateWorldMatrix(!0,!1),t.getInverse(this.matrixWorld),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),t.multiply(e.parent.matrixWorld)),e.applyMatrix(t),e.updateWorldMatrix(!1,!1),this.add(e),this}}(),getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(t,e);if(void 0!==i)return i}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new i.Vector3),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new i.Vector3,e=new i.Vector3;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),n=new r.Quaternion),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,n,e),n}}(),getWorldScale:function(){var t=new i.Vector3,e=new r.Quaternion;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new i.Vector3),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,n),n}}(),getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new i.Vector3),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var r=this.children,i=0,a=r.length;i<a;i++)r[i].updateWorldMatrix(!1,!0)},toJSON:function(t){var e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isMesh&&0!==this.drawMode&&(r.drawMode=this.drawMode),this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,u=o.length;s<u;s++){var c=o[s];i(t.shapes,c)}else i(t.shapes,o)}}if(void 0!==this.material)if(Array.isArray(this.material)){var l=[];for(s=0,u=this.material.length;s<u;s++)l.push(i(t.materials,this.material[s]));r.material=l}else r.material=i(t.materials,this.material);if(this.children.length>0){r.children=[];for(s=0;s<this.children.length;s++)r.children.push(this.children[s].toJSON(t).object)}if(e){var h=y(t.geometries),f=y(t.materials),d=y(t.textures),p=y(t.images);o=y(t.shapes);h.length>0&&(n.geometries=h),f.length>0&&(n.materials=f),d.length>0&&(n.textures=d),p.length>0&&(n.images=p),o.length>0&&(n.shapes=o)}return n.object=r,n;function y(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0;n<t.children.length;n++){var r=t.children[n];this.add(r.clone())}return this}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=s(n(17)),a=s(n(10)),o=s(n(18));function s(t){return t&&t.__esModule?t:{default:t}}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=new(function(){function t(){for(var e in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.callbacks={},this.callbacks[o.default.TRACK_START]=[],this.callbacks[o.default.TRACK_MOVE]=[],this.callbacks[o.default.TRACK_END]=[],this.callbacksOnTrackable={},this.callbacksOnTrackable[o.default.TRACK_START]={},this.callbacksOnTrackable[o.default.TRACK_MOVE]={},this.callbacksOnTrackable[o.default.TRACK_END]={},this.callbacks)document.addEventListener(e,this.handler,!0);r=this}return function(t,e,n){e&&u(t.prototype,e),n&&u(t,n)}(t,[{key:"addEventListener",value:function(){2===arguments.length?this.addOnType.apply(this,arguments):arguments.length>2&&this.addOnId.apply(this,arguments)}},{key:"addOnType",value:function(t,e){this.callbacks[t]||(this.callbacks[t]=[],document.addEventListener(t,this.handler,!0)),this.callbacks[t].push(e)}},{key:"addOnId",value:function(t,e,n){this.callbacksOnTrackable[t][e]||(this.callbacksOnTrackable[t][e]=[]),this.callbacksOnTrackable[t][e].push(n)}},{key:"removeEventListener",value:function(){1===arguments.length?this.removeAll.apply(this,arguments):2===arguments.length?this.removeOnType.apply(this,arguments):arguments.length>2&&this.removeOnId.apply(this,arguments)}},{key:"removeOnType",value:function(t,e){i.default.removeArrayItem(this.callbacks[t],e)}},{key:"removeOnId",value:function(t,e,n){i.default.removeArrayItem(this.callbacksOnTrackable[t][e],n)}},{key:"removeAll",value:function(t){this.callbacks[t]=[],this.callbacksOnTrackable[t]={}}},{key:"handler",value:function(t){if(t.type){var e=t.type,n=t.detail;if(n instanceof a.default){var i=r.callbacksOnTrackable[e][n.target.uri];if(i&&i.length)for(var o=0,s=i.length;o<s;o+=1)i[o](n)}var u=r.callbacks[e];if(u&&u.length>0)for(var c=0,l=u.length;c<l;c+=1)u[c](n)}}},{key:"hasUuid",value:function(t){for(var e in this.callbacksOnTrackable)for(var n in this.callbacksOnTrackable[e])if(n===t)return!0;return!1}},{key:"dispatchEvent",value:function(t,e){t&&document.dispatchEvent(new CustomEvent(t,{detail:e}))}}]),t}());e.default=c,t.exports=e.default},function(t,e,n){"use strict";n.r(e),n.d(e,"Euler",function(){return s});var r=n(3),i=n(0),a=n(2),o=n(1);function s(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._order=r||s.DefaultOrder}s.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],s.DefaultOrder="XYZ",Object.defineProperties(s.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback()}}}),Object.assign(s.prototype,{isEuler:!0,set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var r=o._Math.clamp,i=t.elements,a=i[0],s=i[4],u=i[8],c=i[1],l=i[5],h=i[9],f=i[2],d=i[6],p=i[10];return"XYZ"===(e=e||this._order)?(this._y=Math.asin(r(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-h,p),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(d,l),this._z=0)):"YXZ"===e?(this._x=Math.asin(-r(h,-1,1)),Math.abs(h)<.99999?(this._y=Math.atan2(u,p),this._z=Math.atan2(c,l)):(this._y=Math.atan2(-f,a),this._z=0)):"ZXY"===e?(this._x=Math.asin(r(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-f,p),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(c,a))):"ZYX"===e?(this._y=Math.asin(-r(f,-1,1)),Math.abs(f)<.99999?(this._x=Math.atan2(d,p),this._z=Math.atan2(c,a)):(this._x=0,this._z=Math.atan2(-s,l))):"YZX"===e?(this._z=Math.asin(r(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(-h,l),this._y=Math.atan2(-f,a)):(this._x=0,this._y=Math.atan2(u,p))):"XZY"===e?(this._z=Math.asin(-r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(d,l),this._y=Math.atan2(u,a)):(this._x=Math.atan2(-h,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var t=new a.Matrix4;return function(e,n,r){return t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,n,r)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new r.Quaternion;return function(e){return t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new i.Vector3(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(4);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,r.Object3D),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(e,[{key:"add",value:function(t){t&&t!==this&&t.isObject3D&&(t.parent&&t.parent.remove(t),this.isScene||(t.track=this.track),t.parent=this,t.dispatchEvent({type:"added"}),this.children=[].concat(a(this.children),[t]));for(var e=0;e<(arguments.length<=1?0:arguments.length-1);e+=1)this.add(e+1<1||arguments.length<=e+1?void 0:arguments[e+1])}},{key:"remove",value:function(t){var e=this.children.indexOf(t);e>-1&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children=[].concat(a(this.children.slice(0,e)),a(this.children.slice(e+1))));for(var n=0;n<(arguments.length<=1?0:arguments.length-1);n+=1)this.remove(n+1<1||arguments.length<=n+1?void 0:arguments[n+1])}}]),e}();e.default=c,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;h(n(9));var r=h(n(5)),i=h(n(11)),a=n(2),o=n(0),s=n(3),u=n(17),c=h(n(7)),l=h(n(12));function h(t){return t&&t.__esModule?t:{default:t}}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var d=function(){function t(e,n){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)throw new Error("Entity requires an entity uri");this.renderer=new l.default,this.uri=e,this.type=n&&n.type?n.type:"object",this.name=n&&n.name?n.name:"",this.image=n&&n.image?n.image:"",this.size=n&&n.size?n.size:{width:0,height:0,depth:0,unit:"mm"},this.renderables=[],this.object=new c.default,this._visible=!0,this._track=!1,i.default.addEntity(this)}return function(t,e,n){e&&f(t.prototype,e),n&&f(t,n)}(t,[{key:"setData",value:function(t){this.type=t&&t.type?t.type:"object",this.name=t&&t.name?t.name:"",this.image=t&&t.image?t.image:"",this.size=t&&t.size?t.size:{width:0,height:0,depth:0,unit:"mm"}}},{key:"addRenderable",value:function(t){if(t&&(0===this.renderables.length&&this.renderer.add(this.object),this.renderables.push(t),this.object.add(t),this.track)){var e=this.track;t.traverse(function(t){t.track=e,t.element&&(t.element.style.display="")})}}},{key:"removeRenderable",value:function(t){t&&((0,u.removeArrayItem)(this.renderables,t),this.object.remove(t),0===this.renderables.length&&this.renderer.remove(this.object))}},{key:"removeRenderables",value:function(){this.renderables.length>0&&(this.renderables=[],this.renderer.remove(this.object))}},{key:"getRenderables",value:function(){return this.renderables}},{key:"getRenderable",value:function(t){for(var e=this.renderables.length;e>=0;e-=1)if(this.renderables[e].uuid===t)return this.renderables[e];return null}},{key:"lookAt",value:function(t){this.object.lookAt(t)}},{key:"lootAtRenderables",value:function(t){var e=this;this.object.traverse(function(n){e.object!==n&&n.lookAt(t)})}},{key:"lookAtCamera",value:function(){var t=LetseeEngine.camera.position;this.lootAtRenderables(t)}},{key:"addEventListener",value:function(t,e){r.default.addEventListener(t,this.uri,e)}},{key:"removeEventListener",value:function(t,e){r.default.removeEventListener(t,this.uri,e)}},{key:"visible",get:function(){return this._visible},set:function(t){this._visible=t,this.object.traverse(function(e){e.visible=t,e.element&&(e.element.style.display=t?"":"none")})}},{key:"track",get:function(){return this._track},set:function(t){this._track=t,this.object.traverse(function(e){e.track=t,e.element&&(e.element.style.display=t?"":"none")})}},{key:"scale",set:function(t){t&&this.object.scale.setScalar(t)}},{key:"position",set:function(t){t&&t instanceof o.Vector3&&(this.object.position=t)}},{key:"quaternion",set:function(t){t&&t instanceof s.Quaternion&&this.object.applyQuaternion(t)}},{key:"matrix",set:function(t){t&&t instanceof a.Matrix4&&(this.object.applyMatrix(t),this.object.updateMatrix(),this.object.updateMatrixWorld(!0))}}]),t}();e.default=d,t.exports=e.default},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=null,a=null,o=null,s=null,u=null,c=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(t,[{key:"setConfig",value:function(t){a=t.width,o=t.height,s=t.orientation,u=0===s||180===s}},{key:"os",get:function(){return i},set:function(t){i=t}},{key:"orientation",get:function(){return s},set:function(t){s=t}},{key:"width",get:function(){return a},set:function(t){a=t}},{key:"height",get:function(){return o},set:function(t){o=t}},{key:"isPortrait",get:function(){return u}},{key:"screenWidth",get:function(){return u?a:o}},{key:"screenHeight",get:function(){return u?o:a}}]),t}());e.default=c,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(2);e.default=function t(e,n,i,a,o){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e||!n)throw new Error("EntityEvent requires an event type and entity");this.type=e,this.target=n,this.matrix=i||new r.Matrix4,this.pixelSize=a||{width:0,height:0,depth:0},this.scale=o||1},t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=o(n(8)),a=o(n(19));function o(t){return t&&t.__esModule?t:{default:t}}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r={}}return function(t,e,n){e&&s(t.prototype,e),n&&s(t,n)}(t,[{key:"load",value:function(t){return t instanceof i.default?window._native.loadEntity(t.uri):new Promise(function(t,e){e("parameter is not entity")})}},{key:"getEntity",value:function(t){return r[t]?r[t]:null}},{key:"getEntities",value:function(){return Object.values(r)}},{key:"hasEntity",value:function(t){return!!r[t]}},{key:"addEntity",value:function(t){r[t.uri]=t}},{key:"removeEntity",value:function(t){var e=t;(t instanceof i.default&&(e=t.uri),this.hasEntity(e))&&(r[e].type,r[e].removeRenderables(),delete r[e])}},{key:"setEntity",value:function(t){var e=t.uri;r[e]?r[e].setData(t):r[e]=t}},{key:"setDatas",value:function(t){if(t){var e=t;e&&e.length>0&&e.forEach(function(t){for(var e=t.entity,n=new i.default(e.uri,e),r=t.renderables,o=0;o<r.length;o+=1)for(var s=r[o],u=s.selector,c=s.pose,l=document.querySelectorAll(u),h=0;h<l.length;h+=1){var f=l[h],d=new a.default(f);d.position.x=c[0],d.position.y=c[1],d.position.z=c[2],n.addRenderable(d)}})}}}]),t}());e.default=u,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(9)),i=n(35),a=n(1);function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s,u=function(t){return Math.abs(t)<1e-10?0:t},c=new i.Scene,l=document.createElement("div"),h=document.createElement("div"),f=null,d=null,p=function(){function t(){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),d)return d;s={},l.style.overflow="hidden",l.style.WebkitTransformStyle="preserve-3d",l.style.transformStyle="preserve-3d",l.className="ar-renderer",l.style.position="fixed",l.style.top="0",l.style.left="0",l.style.margin="0",l.style.padding="0",h.style.WebkitTransformStyle="preserve-3d",h.style.transformStyle="preserve-3d",l.appendChild(h),d=this}return function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(t,[{key:"initRenderer",value:function(t){f=t,this.setSize(r.default.screenWidth,r.default.screenHeight),document.body.insertBefore(l,document.body.firstChild)}},{key:"setSize",value:function(t,e){l.style.width=h.style.width="".concat(t,"px"),l.style.height=h.style.height="".concat(e,"px")}},{key:"add",value:function(t){c.add(t)}},{key:"remove",value:function(t){c.remove(t)}},{key:"appendElement",value:function(t){h.appendChild(t)}},{key:"removeElement",value:function(t){h.removeChild(t)}},{key:"render",value:function(){if(f){var t=r.default.screenWidth,e=r.default.screenHeight,n=.5/Math.tan(a._Math.degToRad(.5*f.getEffectiveFOV()))*e,i="translateZ(".concat(n,"px)").concat(this.getCameraCSSMatrix()),o="".concat(i,"translate(").concat(.5*t,"px,").concat(.5*e,"px)");l.style.WebkitPerspective="".concat(n,"px"),l.style.perspective="".concat(n,"px"),h.style.WebkitTransform=o,h.style.transform=o,this.renderObject(c)}}},{key:"getDOMCSSMatrix",value:function(){var t,e,n=r.default.orientation;return 0===n?t="":180===n?t="rotateZ(180deg)":(e=(r.default.width-r.default.height)/2,90!==n&&(e*=-1),t="rotateZ(".concat(90===n?"-":"","90deg) translateX(").concat(e,"px, ").concat(e,"px)")),t}},{key:"getCameraCSSMatrix",value:function(){var t=f.matrixWorldInverse.elements.map(function(t,e){return u(1===e||5===e||9===e||13===e?-t:t)});return"matrix3d(".concat(t.join(","),")")}},{key:"renderObject",value:function(t){var e=this;t.traverse(function(t){if(t.element){var n=t.element,r=e.getObjectCSSMatrix(t),i=s[t.id];void 0!==i&&i===r||(n.style.WebkitTransform=r,n.style.transform=r,s[t.id]=r),n.parentNode!==h&&h.appendChild(n)}})}},{key:"getObjectCSSMatrix",value:function(t){var e=function(t){var e=t.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],-e[8],-e[9],-e[10],-e[11],e[12],e[13],e[14],e[15]]}(t.matrixWorld).map(function(t,e){return u(t)});return"translate(-50%,-50%) matrix3d(".concat(e.join(","),")")}},{key:"orientation",get:function(){return r.default.orientation},set:function(t){r.default.orientation=t,this.setSize(r.default.screenWidth,r.default.screenHeight)}}]),t}();e.default=p,t.exports=e.default},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(t,null,[{key:"LoadImage",value:function(t){var e=new Image;return e.src=t,new Promise(function(t){e.onload=function(){var n=document.createElement("canvas"),r=n.getContext("2d");n.width=e.naturalWidth,n.height=e.naturalHeight,r.drawImage(e,0,0);var i=r.getImageData(0,0,n.width,n.height),a=i.width,o=i.height,s=i.data;t({img:{width:a,height:o,data:s}})}})}},{key:"UUID",get:function(){var t=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(t+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)})}}]),t}();e.default=i,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.STATE_RECOGNIZE=e.STATE_TRACK_END=e.STATE_TRACK_MOVE=e.STATE_TRACK_START=e.EVENT_APP_STATUS=e.EVENT_TRACKER_INIT_COMPLETE=e.EVENT_VIDEO_INIT_COMPLETE=e.WORKER_UPDATE_REFERENCE_IMAGE=e.WORKER_UPDATE_FRAME=e.WORKER_UPDATE_INFORMATION=e.WORKER_DRAW_PROCESSED_FRAME=e.WORKER_POST_NULL=e.WORKER_TRACK_MARKER_SUCCESS=e.WORKER_TRACK_SUCCESS=e.WORKER_SUCCESS_SET_REFERENCE=e.WORKER_AUTH_RESULT=e.WORKER_ON_RUNTIME_INITIALIZED=e.WORKER_TEST=e.WORKER_AUTH=e.WORKER_PROCESS_FRAME=e.WORKER_SET_REFERENCE_IMAGE=e.WORKER_SET_DEBUG_FLAG=void 0;e.WORKER_SET_DEBUG_FLAG="set_debug_flag";e.WORKER_SET_REFERENCE_IMAGE="set_reference_image";e.WORKER_PROCESS_FRAME="process_frame";e.WORKER_AUTH="auth";e.WORKER_TEST="test";e.WORKER_ON_RUNTIME_INITIALIZED="on_runtime_initilized";e.WORKER_AUTH_RESULT="auth_result";e.WORKER_SUCCESS_SET_REFERENCE="success_set_reference";e.WORKER_TRACK_SUCCESS="track_success";e.WORKER_TRACK_MARKER_SUCCESS="track_marker_success";e.WORKER_POST_NULL="post_null";e.WORKER_DRAW_PROCESSED_FRAME="draw_processed_frame";e.WORKER_UPDATE_INFORMATION="update_information";e.WORKER_UPDATE_FRAME="update_frame";e.WORKER_UPDATE_REFERENCE_IMAGE="Update_reference_image";e.EVENT_VIDEO_INIT_COMPLETE="video_init_complete";e.EVENT_TRACKER_INIT_COMPLETE="tracker_init_complete";e.EVENT_APP_STATUS="app_status";e.STATE_TRACK_START="trackstart";e.STATE_TRACK_MOVE="trackmove";e.STATE_TRACK_END="trackend";e.STATE_RECOGNIZE="recognize"},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.events={}}return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(t,[{key:"addEventListener",value:function(t,e){void 0===this.events[t]&&(this.events[t]={listeners:[]}),this.events[t].listeners.push(e)}},{key:"removeEventListener",value:function(t,e){this.events[t].listeners=this.events[t].listeners.filter(function(t){return t.toString()!==e.toString()})}},{key:"dispatch",value:function(t,e){void 0!==this.events[t]&&this.events[t].listeners.forEach(function(t){t(e)})}}]),t}();e.default=i,t.exports=e.default},function(t,e){t.exports=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.uuid=r,e.getVendorPrefix=function(){var t=window.getComputedStyle(document.documentElement,""),e=(Array.prototype.slice.call(t).join("").match(/-(moz|webkit|ms)-/)||""===t.OLink&&["","o"])[1];return e[0].toUpperCase()+e.substr(1)},e.removeArrayItem=i,e.getOperatingSystem=function(){var t=navigator.userAgent||navigator.vendor||window.opera,e="unknown";/windows phone/i.test(t)&&(e="windows");/android/i.test(t)&&(e="android");/iPad|iPhone|iPod/.test(t)&&!window.MSStream&&(e="ios");return e},e.default=void 0;n(0),n(1);function r(){var t=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(t+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)})}function i(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var a={uuid:r,removeArrayItem:i};e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r={TRACK_START:"trackstart",TRACK_MOVE:"trackmove",TRACK_END:"trackend"};e.default=r,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(n(12)),i=a(n(7));function a(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))).renderer=new r.default,n.element=t,n.element.style.position="absolute",n.element.style.display="none",n.element.style.willChange="transform",n.element.style.backfaceVisibility="hidden",n.element.style.WebkitBackfaceVisibility="hidden",n.addEventListener("added",function(t){n.track&&(n.element.style.display="");for(var e=t.target;;){if(e.isScene){n.renderer.appendElement(n.element);break}if(!e.parent)break;e=e.parent}}),n.addEventListener("removed",function(){n.element.parentNode&&n.element.parentNode.removeChild&&n.element.parentNode.removeChild(n.element)}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,i.default),e}();e.default=c,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=y(n(21)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(14)),o=y(n(25)),s=y(n(27)),u=y(n(13)),c=y(n(28)),l=y(n(29)),h=y(n(31)),f=y(n(15)),d=y(n(32)),p=y(n(5));function y(t){return t&&t.__esModule?t:{default:t}}function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){_(t,e,n[e])})}return t}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g(t,e){return!e||"object"!==m(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function x(t,e,n){return e&&w(t.prototype,e),n&&w(t,n),t}var S,T,M,R=function(){function t(e){E(this,t),this.worker=new o.default,this.type=e,this.worker.onmessage=function(t){switch(t.data.cmd){case a.WORKER_ON_RUNTIME_INITIALIZED:r.WORKER_ON_RUNTIME_INITIALIZED(t);break;case a.WORKER_AUTH_RESULT:r.WORKER_AUTH_RESULT(t);break;case a.WORKER_SUCCESS_SET_REFERENCE:r.WORKER_SUCCESS_SET_REFERENCE(t);break;case a.WORKER_TRACK_SUCCESS:r.WORKER_TRACK_SUCCESS(t);break;case a.WORKER_TRACK_MARKER_SUCCESS:r.WORKER_TRACK_MARKER_SUCCESS(t);break;case a.WORKER_POST_NULL:r.WORKER_POST_NULL(t)}},this.worker.postMessage({cmd:"selectWorker",type:e})}return x(t,[{key:"WORKER_UPDATE_INFORMATION",value:function(){this.worker.postMessage()}},{key:"WORKER_AUTH",value:function(){this.worker.postMessage()}},{key:"WORKER_SET_REFERENCE_IMAGE",value:function(){this.worker.postMessage()}},{key:"WORKER_PROCESS_FRAME",value:function(){this.worker.postMessage()}}]),t}(),O=function(t){function e(t){var n;return E(this,e),n=g(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),r?g(n,r):(n.state=null,n.worker,n._updateFlag=!1,n.entityManager=new h.default,n.videoManager=new i.default,n.videoManager.addEventListener(a.EVENT_APP_STATUS,function(t){n.dispatch(a.EVENT_APP_STATUS,t)}),n.workerPool=[],n.config={appKey:null,type:"camera",videoUrl:null,debug:!1,trackerType:t.type||"PLANAR",isSteady:t.isSteady||!1},n.config=v({},n.config,t),n.videoManager.init().then(function(){n.letseeEngineConfig={runType:"BROWSER",width:n.videoManager.screenWidth,height:n.videoManager.screenHeight,orientation:n.videoManager.angle,data:s.default.parse(),projectionParameter:[50,n.videoManager.screenAspectRatio,.1,2e3],isSteady:n.config.isSteady},n.engine=new d.default(n.letseeEngineConfig),n.entityManager.initEntity(n.letseeEngineConfig.data).then(function(t){n.state=t}),n.dispatchEntityEvent(),n.initTracker(n.config.trackerType),n._setState()}).catch(function(t){return console.warn(t),!1}),window.addEventListener("orientationchange",function(t){n.videoManager._setAspectRatio(),n.videoManager.updateCurrentScreenSize();var e=setTimeout(function(){n.engine.onConfigurationChanged({width:n.videoManager.screenValue.width,height:n.videoManager.screenValue.height,orientation:n.videoManager.screenValue.angle}),clearTimeout(e)},500);n.sendMessageToWorker({cmd:a.WORKER_UPDATE_FRAME,parameter:[50,n.videoManager.screenAspectRatio,.1,2e3]});var r=setTimeout(function(){n.sendMessageToWorker({cmd:a.WORKER_PROCESS_FRAME}),clearTimeout(r)},500)}),r=n,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(e,f.default),x(e,[{key:"_setState",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"object"===m(t)&&null!==t?this.state=v({},this.state,t):this.state={type:null,entity:{type:"object",uri:null,name:null,image:null,size:{width:null,height:null,depth:0,unit:"mm"}},matrix:null,pixelSize:{width:null,height:null,depth:null,unit:"px"},scale:null},this.state}},{key:"initTracker",value:function(t){var e=new R(t);this.workerPool.push(e.worker)}},{key:"sendMessageToWorker",value:function(t){this.workerPool.forEach(function(e){e.postMessage(t)})}},{key:"setReferenceImage",value:function(t){var e=this;u.default.LoadImage(t).then(function(t){e.sendMessageToWorker({cmd:a.WORKER_SET_REFERENCE_IMAGE,img_data:t.img}),console.log("[MAIN] Set reference image to tracker")}).catch(function(t){console.warn(t)})}},{key:"renderAllTask",value:function(){var t=this;this.engine.domRenderer.render(),S=performance.now();var e=this.videoManager.renderFrame;T=performance.now(),this.sendMessageToWorker({cmd:"updateScean",img_data:e}),window.requestAnimationFrame(function(){t.renderAllTask()})}},{key:"dispatchTrackState",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=[];null===this.engine&&void 0===this.engine||null===t&&void 0===t||null===e||"recognize"===e||void 0===e||(r=n?this.state.filter(function(t){return(0,c.default)(n,t.entity.letseeMarkerId)}).map(function(r){return r.type=e[(0,l.default)(n,r.entity.letseeMarkerId)],r.matrix=JSON.parse("["+t[(0,l.default)(n,r.entity.letseeMarkerId)]+"]"),r}):this.state.map(function(n){return n.type=e,n.matrix=JSON.parse("["+t+"]"),n.information={name:"temp",test:"test"},n}),this.engine.objectTracker.updateState(r))}},{key:"dispatchEntityEvent",value:function(){var t=this;p.default.addEventListener(a.STATE_TRACK_START,function(e){t.dispatch(a.STATE_TRACK_START,e)}),p.default.addEventListener(a.STATE_TRACK_MOVE,function(e){t.dispatch(a.STATE_TRACK_MOVE,e)}),p.default.addEventListener(a.STATE_TRACK_END,function(e){t.dispatch(a.STATE_TRACK_END,e)})}},{key:"drawFps",value:function(t){}},{key:"WORKER_ON_RUNTIME_INITIALIZED",value:function(t){this.dispatch(a.EVENT_APP_STATUS,{code:203,message:"".concat(t.data.type," Tracker start")});var e={cmd:a.WORKER_UPDATE_INFORMATION,entity:this.state[0].entity,parameter:[50,this.videoManager.screenAspectRatio,.1,2e3],markerList:null,codeList:null};e.markerList=this.entityManager.markerList||null,e.codeList=this.entityManager.codeList||null,this.sendMessageToWorker(e),this.sendMessageToWorker({cmd:a.WORKER_AUTH,appKey:this.config.appKey}),this.renderAllTask()}},{key:"WORKER_AUTH_RESULT",value:function(t){var e={code:null,message:null};switch(t.data.result){case"pending":e.code=204,e.message="Authorization start",this.dispatch(a.EVENT_APP_STATUS,e);break;case"success":e.code=205,e.message="Authorization success",this.dispatch(a.EVENT_APP_STATUS,e),this.state[0].entity.image?this.setReferenceImage(this.state[0].entity.image):this.sendMessageToWorker({cmd:a.WORKER_SET_REFERENCE_IMAGE});break;case"timeout":e.code=106,e.message="Authorization timeout",this.dispatch(a.EVENT_APP_STATUS,e);break;case"fail":e.code=105,e.message="Authorization failed",this.dispatch(a.EVENT_APP_STATUS,e)}}},{key:"WORKER_SUCCESS_SET_REFERENCE",value:function(t){t.data.result?this.dispatch(a.EVENT_APP_STATUS,{code:206,message:"Reference image setup success"}):console.warn("[MAIN] Failed set reference image")}},{key:"WORKER_TRACK_SUCCESS",value:function(t){this.dispatchTrackState(t.data.pose,t.data.trackState,t.data.marker),M=t.data.time||0}},{key:"WORKER_TRACK_MARKER_SUCCESS",value:function(t){}},{key:"WORKER_POST_NULL",value:function(t){}},{key:"updateFlag",get:function(){return this._updateFlag},set:function(t){this._updateFlag=t}},{key:"videoProcessTime",get:function(){return T-S}},{key:"trackerProcessTime",get:function(){return M}}]),e}();e.default=O,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i,a,o=n(13),s=l(n(22)),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(14)),c=l(n(15));function l(t){return t&&t.__esModule?t:{default:t}}function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e){return!e||"object"!==h(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y,m,v=document.createElement("div"),_=document.createElement("video"),g=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),r?d(t,r):(t.mediaTrack,t.deviceID,t.amountOfCameras,t.currentFacingMode="environment",t.angle=0,t.type=null,t.videoAttached=!1,t.isPortrait=!0,t.frameAspectRatio,t.screenAspectRatio,t.screenWidth=0,t.screenHeight=0,t.frameData,t.dpr=1,t.browser="unknown",t.os="unknown",_.addEventListener("loadeddata",function(){t.dispatch(u.EVENT_APP_STATUS,{code:202,message:"Video start"})}),t.debug,t.videoUrl,t.video={constraints:{video:{facingMode:t.currentFacingMode,width:1280,height:720},audio:!1},viewPort:{width:null,height:null}},r=t,t)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(e,c.default),function(t,e,n){e&&f(t.prototype,e),n&&f(t,n)}(e,[{key:"init",value:function(){var t=this;return new Promise(function(e,n){t._setAspectRatio(),t._initCameraContainer(),t.videoUrl?t._attachSourceToVideo(t.videoUrl):t.getAttachedVideo().then(function(){t.dispatch(u.EVENT_APP_STATUS,{code:200,message:"Camera initialize start"}),t._initCamera(),t._attachStreamToVideo(t.video.constraints)}).then(function(){t.dispatch(u.EVENT_APP_STATUS,{code:201,message:"Camera initialize done"}),t._initCanvas(),e()}).catch(function(t){n(t)})})}},{key:"initDebug",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!0===e){this.debug=e,this.videoUrl=t;var n=document.createElement("canvas");n.id="debugScreen",n.style.position="fixed",n.style.top="0px",n.style.left="0px",n.style.width="100%",n.style.zIndex="-1",n.style.background="#ff0",this.debugScreen=n,document.body.appendChild(this.debugScreen)}}},{key:"_initCameraContainer",value:function(){document.body.style.margin="0px",document.body.style.padding="0px",_.id=o.UUID,_.setAttribute("playsinline",!0),_.autoplay=!0,_.muted=!0,_.style.position="fixed",_.style.top="0px",_.style.left="0px",_.style.zIndex="0",_.style.width="100%",v.appendChild(_),v.id="videoWrapper",v.style.position="fixed",v.style.top="0px",v.style.right="0px",v.style.bottom="0px",v.style.left="0px",v.style.width="100%",v.style.height="100%",v.style.zIndex="-100",document.body.appendChild(v)}},{key:"getAttachedVideo",value:function(){var t=this;return new Promise(function(e,n){s.default.load(function(){t.amountOfCameras=s.default.videoInputDevices.length;var r=s.default.browser.name.toLowerCase(),i=s.default.osName.toLowerCase();r.match(/chrome/i)?t.browser="chrome":r.match(/safari/i)?t.browser="safari":t.browser="unknown",i.match(/ios/i)?t.os="ios":i.match(/android/i)?t.os="android":t.os="unknown","ios"===t.os&&"safari"!==t.browser&&(t.dispatch(u.EVENT_APP_STATUS,{code:101,message:"Please use safari with ios"}),n("Please use safari with ios")),!1===s.default.isWebRTCSupported&&(t.dispatch(u.EVENT_APP_STATUS,{code:102,message:"Unsupported browser"}),n("Please use Chrome, Firefox, iOS 11, Android 5 or higher, Safari 11 or higher")),!1===s.default.hasWebcam&&(t.dispatch(u.EVENT_APP_STATUS,{code:103,message:"No camera detected"}),n("Please install an external webcam device.")),s.default.isMobileDevice||t.dispatch(u.EVENT_APP_STATUS,{code:104,message:"No mobile device detected"}),e()})})}},{key:"_initCanvas",value:function(){this._setAspectRatio(),this.updateCurrentScreenSize(),window.OffscreenCanvas?y=new OffscreenCanvas(i,a):((y=document.createElement("canvas")).width=i,y.height=a,y.style.transform="translateZ(0)"),m=y.getContext("2d",{alpha:!1})}},{key:"updateCurrentScreenSize",value:function(){i=Math.floor(this.isPortrait?this.screenWidth:this.screenHeight),a=Math.floor(this.isPortrait?this.screenHeight:this.screenWidth)}},{key:"_setAspectRatio",value:function(){this.angle=void 0!==screen.orientation&&screen.orientation?screen.orientation.angle:window.orientation,this.type=void 0!==screen.orientation&&screen.orientation?"chrome":"safari",90===this.angle||-90===this.angle||270===this.angle||-270===this.angle?(this.isPortrait=!1,"chrome"===this.type?(this.screenWidth=screen.height,this.screenHeight=screen.width):(this.screenWidth=screen.width,this.screenHeight=screen.height)):(this.isPortrait=!0,this.screenWidth=screen.width,this.screenHeight=screen.height),this.screenAspectRatio=0===this.angle||180===this.angle?this.screenWidth/this.screenHeight:this.screenHeight/this.screenWidth,this.frameAspectRatio=this.screenWidth/this.screenHeight}},{key:"_initCamera",value:function(){window.stream&&window.stream.getTracks().forEach(function(t){t.stop()}),this.video.viewPort={width:window.innerWidth,height:window.innerHeight},this._setAspectRatio()}},{key:"_attachStreamToVideo",value:function(t){var e=this;return new Promise(function(n,r){setTimeout(function(){navigator.mediaDevices.getUserMedia(t).then(function(t){return window.stream=t,_.srcObject=t,e.deviceID=t.getTracks()[0].getSettings().deviceId,e.videoAttached=!0,navigator.mediaDevices.enumerateDevices()}).then(function(t){n()}).catch(function(t){r(t)})},window.stream?200:0)})}},{key:"_attachSourceToVideo",value:function(t){if(t){var e=document.createElement("source");e.src=t,e.type="video/mp4",_.appendChild(e),_.addEventListener("canplay",function(){return!0})}}},{key:"renderFrame",get:function(){return m.drawImage(_,0,0,_.clientWidth,_.clientHeight),m.getImageData(0,0,i,a)}},{key:"screenValue",get:function(){var t,e,n=void 0!==screen.orientation&&screen.orientation?screen.orientation.angle:window.orientation,r=void 0!==screen.orientation&&screen.orientation?"chrome":"safari";return 90===n||-90===n||270===n||-270===n?(this.isPortrait=!1,"chrome"===r?(t=screen.height,e=screen.width):(t=screen.width,e=screen.height)):(t=screen.width,e=screen.height),{width:t,height:e,angle:n}}}]),e}();e.default=g,t.exports=e.default},function(t,e,n){"use strict";(function(n,r){var i;!function(){var a="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";if(b="object"==typeof n&&"object"==typeof n.versions&&n.versions.node&&!n.browser){var o=n.versions.node.toString().replace("v","");a="Nodejs/"+o+" (NodeOS) AppleWebKit/"+o+" (KHTML, like Gecko) Nodejs/"+o+" Nodejs/"+o}!function(t){"undefined"==typeof window&&("undefined"==typeof window&&void 0!==r&&(r.navigator={userAgent:a,getUserMedia:function(){}},t.window=r),"undefined"==typeof location&&(t.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(t.screen={width:0,height:0}))}(void 0!==r?r:window);var s=window.navigator;void 0!==s?(void 0!==s.webkitGetUserMedia&&(s.getUserMedia=s.webkitGetUserMedia),void 0!==s.mozGetUserMedia&&(s.getUserMedia=s.mozGetUserMedia)):s={getUserMedia:function(){},userAgent:a};var u=!!/Android|webOS|iPhone|iPad|iPod|BB10|BlackBerry|IEMobile|Opera Mini|Mobile|mobile/i.test(s.userAgent||""),c=!(-1===s.userAgent.indexOf("Edge")||!s.msSaveOrOpenBlob&&!s.msSaveBlob),l=!!window.opera||s.userAgent.indexOf(" OPR/")>=0,h=void 0!==window.InstallTrigger,f=/^((?!chrome|android).)*safari/i.test(s.userAgent),d=!!window.chrome&&!l,p="undefined"!=typeof document&&!!document.documentMode&&!c;function y(t,e){var n=0,r=!1,i=window.setInterval(function(){t()&&(window.clearInterval(i),e(r)),n++>50&&(window.clearInterval(i),e(r=!0))},10)}var m={Android:function(){return s.userAgent.match(/Android/i)},BlackBerry:function(){return s.userAgent.match(/BlackBerry|BB10/i)},iOS:function(){return s.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return s.userAgent.match(/Opera Mini/i)},Windows:function(){return s.userAgent.match(/IEMobile/i)},any:function(){return m.Android()||m.BlackBerry()||m.iOS()||m.Opera()||m.Windows()},getOsName:function(){var t="Unknown OS";return m.Android()&&(t="Android"),m.BlackBerry()&&(t="BlackBerry"),m.iOS()&&(t="iOS"),m.Opera()&&(t="Opera Mini"),m.Windows()&&(t="Windows"),t}};var v="Unknown OS",_="Unknown OS Version";var g=function(){for(var t,e=s.appVersion,n=s.userAgent,r="-",i=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}],a=0;t=i[a];a++)if(t.r.test(n)){r=t.s;break}var o="-";switch(/Windows/.test(r)&&(/Windows (.*)/.test(r)&&(o=/Windows (.*)/.exec(r)[1]),r="Windows"),r){case"Mac OS X":/Mac OS X (10[\.\_\d]+)/.test(n)&&(o=/Mac OS X (10[\.\_\d]+)/.exec(n)[1]);break;case"Android":/Android ([\.\_\d]+)/.test(n)&&(o=/Android ([\.\_\d]+)/.exec(n)[1]);break;case"iOS":/OS (\d+)_(\d+)_?(\d+)?/.test(n)&&(o=(o=/OS (\d+)_(\d+)_?(\d+)?/.exec(e))[1]+"."+o[2]+"."+(0|o[3]))}return{osName:r,osVersion:o}}();g&&g.osName&&"-"!=g.osName?(v=g.osName,_=g.osVersion):m.any()&&"Android"==(v=m.getOsName())&&(_=function(t){var e=(t=(t||s.userAgent).toLowerCase()).match(/android\s([0-9\.]*)/);return!!e&&e[1]}());var b="object"==typeof n&&"object"==typeof n.versions&&n.versions.node;"Unknown OS"===v&&b&&(v="Nodejs",_=n.versions.node.toString().replace("v",""));var E=!1,w=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(t){"undefined"!=typeof document&&"function"==typeof document.createElement&&(!E&&t in document.createElement("canvas")&&(E=!0),!w&&t in document.createElement("video")&&(w=!0))});var x=/^(192\.168\.|169\.254\.|10\.|172\.(1[6-9]|2\d|3[01]))/,S=/([0-9]{1,3}(\.[0-9]{1,3}){3})/,T=/[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7}/;var M=[],R=[],O=[],k=[];s.mediaDevices&&s.mediaDevices.enumerateDevices&&(s.enumerateDevices=function(t){var e=s.mediaDevices.enumerateDevices();e&&e.then?s.mediaDevices.enumerateDevices().then(t).catch(function(){t([])}):t([])});var A=!1;"undefined"!=typeof MediaStreamTrack&&"getSources"in MediaStreamTrack?A=!0:s.mediaDevices&&s.mediaDevices.enumerateDevices&&(A=!0);var C=!1,P=!1,W=!1,j=!1,z=!1;function I(t){if(A)if(!s.enumerateDevices&&window.MediaStreamTrack&&window.MediaStreamTrack.getSources&&(s.enumerateDevices=window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack)),!s.enumerateDevices&&s.enumerateDevices&&(s.enumerateDevices=s.enumerateDevices.bind(s)),s.enumerateDevices){M=[],R=[],O=[],k=[],C=!1,P=!1,W=!1,j=!1,z=!1;var e={};s.enumerateDevices(function(n){n.forEach(function(t){var n={};for(var r in t)try{"function"!=typeof t[r]&&(n[r]=t[r])}catch(t){}e[n.deviceId+n.label+n.kind]||("audio"===n.kind&&(n.kind="audioinput"),"video"===n.kind&&(n.kind="videoinput"),n.deviceId||(n.deviceId=n.id),n.id||(n.id=n.deviceId),n.label?("videoinput"!==n.kind||z||(z=!0),"audioinput"!==n.kind||j||(j=!0)):(n.isCustomLabel=!0,"videoinput"===n.kind?n.label="Camera "+(k.length+1):"audioinput"===n.kind?n.label="Microphone "+(R.length+1):"audiooutput"===n.kind?n.label="Speaker "+(O.length+1):n.label="Please invoke getUserMedia once.",void 0!==N&&N.browser.isChrome&&N.browser.version>=46&&!/^(https:|chrome-extension:)$/g.test(location.protocol||"")&&"undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(n.label="HTTPs is required to get label of this "+n.kind+" device.")),"audioinput"===n.kind&&(C=!0,-1===R.indexOf(n)&&R.push(n)),"audiooutput"===n.kind&&(P=!0,-1===O.indexOf(n)&&O.push(n)),"videoinput"===n.kind&&(W=!0,-1===k.indexOf(n)&&k.push(n)),M.push(n),e[n.deviceId+n.label+n.kind]=n)}),void 0!==N&&(N.MediaDevices=M,N.hasMicrophone=C,N.hasSpeakers=P,N.hasWebcam=W,N.isWebsiteHasWebcamPermissions=z,N.isWebsiteHasMicrophonePermissions=j,N.audioInputDevices=R,N.audioOutputDevices=O,N.videoInputDevices=k),t&&t()})}else t&&t();else t&&t()}var N=window.DetectRTC||{};N.browser=function(){s.appVersion;var t,e,n,r=s.userAgent,i=s.appName,a=""+parseFloat(s.appVersion),o=parseInt(s.appVersion,10);if(f&&!d&&-1!==r.indexOf("CriOS")&&(f=!1,d=!0),l){i="Opera";try{o=(a=s.userAgent.split("OPR/")[1].split(" ")[0]).split(".")[0]}catch(t){a="0.0.0.0",o=0}}else p?((e=r.indexOf("rv:"))>0?a=r.substring(e+3):(e=r.indexOf("MSIE"),a=r.substring(e+5)),i="IE"):d?(e=r.indexOf("Chrome"),i="Chrome",a=r.substring(e+7)):f?(e=r.indexOf("Safari"),i="Safari",a=r.substring(e+7),-1!==(e=r.indexOf("Version"))&&(a=r.substring(e+8)),-1!==s.userAgent.indexOf("Version/")&&(a=s.userAgent.split("Version/")[1].split(" ")[0])):h?(e=r.indexOf("Firefox"),i="Firefox",a=r.substring(e+8)):(t=r.lastIndexOf(" ")+1)<(e=r.lastIndexOf("/"))&&(i=r.substring(t,e),a=r.substring(e+1),i.toLowerCase()===i.toUpperCase()&&(i=s.appName));return c&&(i="Edge",a=s.userAgent.split("Edge/")[1]),-1!==(n=a.search(/[; \)]/))&&(a=a.substring(0,n)),o=parseInt(""+a,10),isNaN(o)&&(a=""+parseFloat(s.appVersion),o=parseInt(s.appVersion,10)),{fullVersion:a,version:o,name:i,isPrivateBrowsing:!1}}(),function(t){var e;try{if(window.webkitRequestFileSystem)window.webkitRequestFileSystem(window.TEMPORARY,1,function(){e=!1},function(t){e=!0});else if(window.indexedDB&&/Firefox/.test(window.navigator.userAgent)){var n;try{(n=window.indexedDB.open("test")).onerror=function(){return!0}}catch(t){e=!0}void 0===e&&y(function(){return"done"===n.readyState},function(t){t||(e=!n.result)})}else if(function(t){var e=t.toLowerCase();if(0===e.indexOf("msie")&&0===e.indexOf("trident"))return!1;var n=/(?:msie|rv:)\s?([\d\.]+)/.exec(e);return!!(n&&parseInt(n[1],10)>=10)}(window.navigator.userAgent)){e=!1;try{window.indexedDB||(e=!0)}catch(t){e=!0}}else if(window.localStorage&&/Safari/.test(window.navigator.userAgent)){try{window.localStorage.setItem("test",1)}catch(t){e=!0}void 0===e&&(e=!1,window.localStorage.removeItem("test"))}}catch(t){e=!1}y(function(){return void 0!==e},function(n){t(e)})}(function(t){N.browser.isPrivateBrowsing=!!t}),N.browser["is"+N.browser.name]=!0,N.osName=v,N.osVersion=_;"object"==typeof n&&"object"==typeof n.versions&&n.versions["node-webkit"];var D=!1;["RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","RTCIceGatherer"].forEach(function(t){D||t in window&&(D=!0)}),N.isWebRTCSupported=D,N.isORTCSupported="undefined"!=typeof RTCIceGatherer;var U=!1;(N.browser.isChrome&&N.browser.version>=35?U=!0:N.browser.isFirefox&&N.browser.version>=34?U=!0:N.browser.isEdge&&N.browser.version>=17?U=!0:"Android"===N.osName&&N.browser.isChrome&&(U=!0),/^(https:|chrome-extension:)$/g.test(location.protocol||""))||("undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(N.browser.isChrome||N.browser.isEdge||N.browser.isOpera)?U=!1:N.browser.isFirefox&&(U=!1));N.isScreenCapturingSupported=U;var F={isSupported:!1,isCreateMediaStreamSourceSupported:!1};["AudioContext","webkitAudioContext","mozAudioContext","msAudioContext"].forEach(function(t){F.isSupported||t in window&&(F.isSupported=!0,window[t]&&"createMediaStreamSource"in window[t].prototype&&(F.isCreateMediaStreamSourceSupported=!0))}),N.isAudioContextSupported=F.isSupported,N.isCreateMediaStreamSourceSupported=F.isCreateMediaStreamSourceSupported;var K=!1;N.browser.isChrome&&N.browser.version>31&&(K=!0),N.isRtpDataChannelsSupported=K;var V=!1;N.browser.isFirefox&&N.browser.version>28?V=!0:N.browser.isChrome&&N.browser.version>25?V=!0:N.browser.isOpera&&N.browser.version>=11&&(V=!0),N.isSctpDataChannelsSupported=V,N.isMobileDevice=u;var L=!1;s.getUserMedia?L=!0:s.mediaDevices&&s.mediaDevices.getUserMedia&&(L=!0),N.browser.isChrome&&N.browser.version>=46&&!/^(https:|chrome-extension:)$/g.test(location.protocol||"")&&"undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(L="Requires HTTPs"),"Nodejs"===N.osName&&(L=!1),N.isGetUserMediaSupported=L;var Z="";screen.width&&(Z+=(screen.width?screen.width:"")+" x "+(screen.height?screen.height:""));N.displayResolution=Z,N.displayAspectRatio=function(t,e){var n=function t(e,n){return 0==n?e:t(n,e%n)}(t,e);return t/n/(e/n)}(screen.width,screen.height).toFixed(2),N.isCanvasSupportsStreamCapturing=E,N.isVideoSupportsStreamCapturing=w,"Chrome"==N.browser.name&&N.browser.version>=53&&(N.isCanvasSupportsStreamCapturing||(N.isCanvasSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features"),N.isVideoSupportsStreamCapturing||(N.isVideoSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features")),N.DetectLocalIPAddress=function(t,e){if(N.isWebRTCSupported){var n=!0,r=!0;!function(t,e){if("undefined"!=typeof document&&"function"==typeof document.getElementById){var n={},r=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;if(!r){var i=document.getElementById("iframe");if(!i)return;var a=i.contentWindow;r=a.RTCPeerConnection||a.mozRTCPeerConnection||a.webkitRTCPeerConnection}if(r){var o=null;"Chrome"===N.browser&&N.browser.version<58&&(o={optional:[{RtpDataChannels:!0}]});var s=new r({iceServers:[{urls:"stun:stun.l.google.com:19302"}]},o);if(e&&(s.addStream?s.addStream(e):s.addTrack&&e.getTracks()[0]&&s.addTrack(e.getTracks()[0],e)),s.onicecandidate=function(t){t.candidate&&t.candidate.candidate?u(t.candidate.candidate):u()},!e)try{s.createDataChannel("sctp",{})}catch(t){}N.isPromisesSupported?s.createOffer().then(function(t){s.setLocalDescription(t).then(c)}):s.createOffer(function(t){s.setLocalDescription(t,c,function(){})},function(){})}}function u(e){if(e){var r=S.exec(e);if(r){var i=r[1],a=e.match(x);void 0===n[i]&&t(i,a,!0),n[i]=!0}}else t()}function c(){var t=s.localDescription.sdp.split("\n");t.forEach(function(t){t&&0===t.indexOf("a=candidate:")&&u(t)})}}(function(e){e?e.match(x)?t("Local: "+e,n=!1,r):e.match(T)?t("Public: "+e,n,r=!1):t("Public: "+e,n,r):t()},e)}},N.isWebSocketsSupported="WebSocket"in window&&2===window.WebSocket.CLOSING,N.isWebSocketsBlocked=!N.isWebSocketsSupported,"Nodejs"===N.osName&&(N.isWebSocketsSupported=!0,N.isWebSocketsBlocked=!1),N.checkWebSocketsSupport=function(t){t=t||function(){};try{var e,n=new WebSocket("wss://echo.websocket.org:443/");n.onopen=function(){N.isWebSocketsBlocked=!1,e=(new Date).getTime(),n.send("ping")},n.onmessage=function(){N.WebsocketLatency=(new Date).getTime()-e+"ms",t(),n.close(),n=null},n.onerror=function(){N.isWebSocketsBlocked=!0,t()}}catch(e){N.isWebSocketsBlocked=!0,t()}},N.load=function(t){I(t=t||function(){})},N.MediaDevices=void 0!==M?M:[],N.hasMicrophone=C,N.hasSpeakers=P,N.hasWebcam=W,N.isWebsiteHasWebcamPermissions=z,N.isWebsiteHasMicrophonePermissions=j,N.audioInputDevices=R,N.audioOutputDevices=O,N.videoInputDevices=k;var H=!1;"undefined"!=typeof document&&"function"==typeof document.createElement&&"setSinkId"in document.createElement("video")&&(H=!0),N.isSetSinkIdSupported=H;var B=!1;N.browser.isFirefox&&"undefined"!=typeof mozRTCPeerConnection?"getSenders"in mozRTCPeerConnection.prototype&&(B=!0):N.browser.isChrome&&"undefined"!=typeof webkitRTCPeerConnection&&"getSenders"in webkitRTCPeerConnection.prototype&&(B=!0),N.isRTPSenderReplaceTracksSupported=B;var G=!1;N.browser.isFirefox&&N.browser.version>38&&(G=!0),N.isRemoteStreamProcessingSupported=G;var q=!1;"undefined"!=typeof MediaStreamTrack&&"applyConstraints"in MediaStreamTrack.prototype&&(q=!0),N.isApplyConstraintsSupported=q;var Y=!1;N.browser.isFirefox&&N.browser.version>=43&&(Y=!0),N.isMultiMonitorScreenCapturingSupported=Y,N.isPromisesSupported=!!("Promise"in window),N.version="1.3.9",void 0===N&&(window.DetectRTC={});var X=window.MediaStream;void 0===X&&"undefined"!=typeof webkitMediaStream&&(X=webkitMediaStream),N.MediaStream=void 0!==X&&"function"==typeof X&&Object.keys(X.prototype),"undefined"!=typeof MediaStreamTrack?N.MediaStreamTrack=Object.keys(MediaStreamTrack.prototype):N.MediaStreamTrack=!1;var Q=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;N.RTCPeerConnection=void 0!==Q&&Object.keys(Q.prototype),window.DetectRTC=N,t.exports=N,void 0===(i=function(){return N}.apply(e,[]))||(t.exports=i)}()}).call(this,n(23),n(24))},function(t,e){var n,r,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(t){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(t){r=o}}();var u,c=[],l=!1,h=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&d())}function d(){if(!l){var t=s(f);l=!0;for(var e=c.length;e;){for(u=c,c=[];++h<e;)u&&u[h].run();h=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){t.exports=function(){return n(26)('!function(t){var r={};function n(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=r,n.d=function(t,r,e){n.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:e})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,r){if(1&r&&(t=n(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var a in t)n.d(e,a,function(r){return t[r]}.bind(null,a));return e},n.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(r,"a",r),r},n.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},n.p="./",n(n.s=3)}([function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.STATE_RECOGNIZE=r.STATE_TRACK_END=r.STATE_TRACK_MOVE=r.STATE_TRACK_START=r.EVENT_APP_STATUS=r.EVENT_TRACKER_INIT_COMPLETE=r.EVENT_VIDEO_INIT_COMPLETE=r.WORKER_UPDATE_REFERENCE_IMAGE=r.WORKER_UPDATE_FRAME=r.WORKER_UPDATE_INFORMATION=r.WORKER_DRAW_PROCESSED_FRAME=r.WORKER_POST_NULL=r.WORKER_TRACK_MARKER_SUCCESS=r.WORKER_TRACK_SUCCESS=r.WORKER_SUCCESS_SET_REFERENCE=r.WORKER_AUTH_RESULT=r.WORKER_ON_RUNTIME_INITIALIZED=r.WORKER_TEST=r.WORKER_AUTH=r.WORKER_PROCESS_FRAME=r.WORKER_SET_REFERENCE_IMAGE=r.WORKER_SET_DEBUG_FLAG=void 0;r.WORKER_SET_DEBUG_FLAG="set_debug_flag";r.WORKER_SET_REFERENCE_IMAGE="set_reference_image";r.WORKER_PROCESS_FRAME="process_frame";r.WORKER_AUTH="auth";r.WORKER_TEST="test";r.WORKER_ON_RUNTIME_INITIALIZED="on_runtime_initilized";r.WORKER_AUTH_RESULT="auth_result";r.WORKER_SUCCESS_SET_REFERENCE="success_set_reference";r.WORKER_TRACK_SUCCESS="track_success";r.WORKER_TRACK_MARKER_SUCCESS="track_marker_success";r.WORKER_POST_NULL="post_null";r.WORKER_DRAW_PROCESSED_FRAME="draw_processed_frame";r.WORKER_UPDATE_INFORMATION="update_information";r.WORKER_UPDATE_FRAME="update_frame";r.WORKER_UPDATE_REFERENCE_IMAGE="Update_reference_image";r.EVENT_VIDEO_INIT_COMPLETE="video_init_complete";r.EVENT_TRACKER_INIT_COMPLETE="tracker_init_complete";r.EVENT_APP_STATUS="app_status";r.STATE_TRACK_START="trackstart";r.STATE_TRACK_MOVE="trackmove";r.STATE_TRACK_END="trackend";r.STATE_RECOGNIZE="recognize"},function(t,r,n){(function(t,e){var a;\n/**\n * @license\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash core -o ./dist/lodash.core.js`\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */(function(){var u,i="Expected a function",o=1,c=2,f=1,l=1/0,s=9007199254740991,E="[object Arguments]",_="[object Array]",p="[object AsyncFunction]",R="[object Boolean]",A="[object Date]",T="[object Error]",y="[object Function]",h="[object GeneratorFunction]",g="[object Number]",O="[object Object]",S="[object Proxy]",v="[object RegExp]",d="[object String]",b=/[&<>"\']/g,m=RegExp(b.source),k=/^(?:0|[1-9]\\d*)$/,C="object"==typeof t&&t&&t.Object===Object&&t,N="object"==typeof self&&self&&self.Object===Object&&self,I=C||N||Function("return this")();r&&!r.nodeType&&r&&"object"==typeof e&&e&&e.nodeType;function K(t,r){return t.push.apply(t,r),t}function F(t){return function(r){return null==r?u:r[t]}}var U=function(t){return function(r){return null==t?u:t[r]}}({"&":"&amp;","<":"&lt;",">":"&gt;",\'"\':"&quot;","\'":"&#39;"});var w=Array.prototype,M=Object.prototype,P=M.hasOwnProperty,j=0,W=M.toString,D=I._,L=Object.create,x=M.propertyIsEnumerable,G=I.isFinite,H=function(t,r){return function(n){return t(r(n))}}(Object.keys,Object),V=Math.max;function Z(t){return t instanceof z?t:new z(t)}var B=function(){function t(){}return function(r){if(!xt(r))return{};if(L)return L(r);t.prototype=r;var n=new t;return t.prototype=u,n}}();function z(t,r){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!r}function q(t,r,n){var e=t[r];P.call(t,r)&&Mt(e,n)&&(n!==u||r in t)||$(t,r,n)}function $(t,r,n){t[r]=n}function Q(t,r,n){if("function"!=typeof t)throw new TypeError(i);return setTimeout(function(){t.apply(u,n)},r)}z.prototype=B(Z.prototype),z.prototype.constructor=z;var Y=function(t,r){return function(n,e){if(null==n)return n;if(!Wt(n))return t(n,e);for(var a=n.length,u=r?a:-1,i=Object(n);(r?u--:++u<a)&&!1!==e(i[u],u,i););return n}}(nt);function J(t,r,n){for(var e=-1,a=t.length;++e<a;){var i=t[e],o=r(i);if(null!=o&&(c===u?o==o:n(o,c)))var c=o,f=i}return f}function X(t,r){var n=[];return Y(t,function(t,e,a){r(t,e,a)&&n.push(t)}),n}function tt(t,r,n,e,a){var u=-1,i=t.length;for(n||(n=ht),a||(a=[]);++u<i;){var o=t[u];r>0&&n(o)?r>1?tt(o,r-1,n,e,a):K(a,o):e||(a[a.length]=o)}return a}var rt=function(t){return function(r,n,e){for(var a=-1,u=Object(r),i=e(r),o=i.length;o--;){var c=i[t?o:++a];if(!1===n(u[c],c,u))break}return r}}();function nt(t,r){return t&&rt(t,r,Jt)}function et(t,r){return X(r,function(r){return Lt(t[r])})}function at(t){return function(t){return W.call(t)}(t)}function ut(t,r){return t>r}var it=ur;function ot(t,r,n,e,a){return t===r||(null==t||null==r||!Gt(t)&&!Gt(r)?t!=t&&r!=r:function(t,r,n,e,a,i){var f=jt(t),l=jt(r),s=f?_:at(t),p=l?_:at(r),y=(s=s==E?O:s)==O,h=(p=p==E?O:p)==O,S=s==p;i||(i=[]);var b=Ct(i,function(r){return r[0]==t}),m=Ct(i,function(t){return t[0]==r});if(b&&m)return b[1]==r;if(i.push([t,r]),i.push([r,t]),S&&!y){var k=f?function(t,r,n,e,a,i){var f=n&o,l=t.length,s=r.length;if(l!=s&&!(f&&s>l))return!1;var E=-1,_=!0,p=n&c?[]:u;for(;++E<l;){var R=t[E],A=r[E];if(void 0!==u){void 0,_=!1;break}if(p){if(!Rt(r,function(t,r){if(!mt(p,r)&&(R===t||a(R,t,n,e,i)))return p.push(r)})){_=!1;break}}else if(R!==A&&!a(R,A,n,e,i)){_=!1;break}}return _}(t,r,n,e,a,i):function(t,r,n,e,a,u,i){switch(n){case R:case A:case g:return Mt(+t,+r);case T:return t.name==r.name&&t.message==r.message;case v:case d:return t==r+""}return!1}(t,r,s);return i.pop(),k}if(!(n&o)){var C=y&&P.call(t,"__wrapped__"),N=h&&P.call(r,"__wrapped__");if(C||N){var I=C?t.value():t,K=N?r.value():r,k=a(I,K,n,e,i);return i.pop(),k}}if(!S)return!1;var k=function(t,r,n,e,a,i){var c=n&o,f=Jt(t),l=f.length,s=Jt(r).length;if(l!=s&&!c)return!1;var E=l;for(;E--;){var _=f[E];if(!(c?_ in r:P.call(r,_)))return!1}var p=!0,R=c;for(;++E<l;){_=f[E];var A=t[_],T=r[_];if(!(void 0===u?A===T||a(A,T,n,e,i):void 0)){p=!1;break}R||(R="constructor"==_)}if(p&&!R){var y=t.constructor,h=r.constructor;y!=h&&"constructor"in t&&"constructor"in r&&!("function"==typeof y&&y instanceof y&&"function"==typeof h&&h instanceof h)&&(p=!1)}return p}(t,r,n,e,a,i);return i.pop(),k}(t,r,n,e,ot,a))}function ct(t){return"function"==typeof t?t:null==t?nr:("object"==typeof t?st:F)(t)}function ft(t,r){return t<r}function lt(t,r){var n=-1,e=Wt(t)?Array(t.length):[];return Y(t,function(t,a,u){e[++n]=r(t,a,u)}),e}function st(t){var r=H(t);return function(n){var e=r.length;if(null==n)return!e;for(n=Object(n);e--;){var a=r[e];if(!(a in n&&ot(t[a],n[a],o|c)))return!1}return!0}}function Et(t,r){return vt(St(t,r,nr),t+"")}function _t(t,r,n){var e=-1,a=t.length;r<0&&(r=-r>a?0:a+r),(n=n>a?a:n)<0&&(n+=a),a=r>n?0:n-r>>>0,r>>>=0;for(var u=Array(a);++e<a;)u[e]=t[e+r];return u}function pt(t){return _t(t,0,t.length)}function Rt(t,r){var n;return Y(t,function(t,e,a){return!(n=r(t,e,a))}),!!n}function At(t,r,n,e){var a=!n;n||(n={});for(var i=-1,o=r.length;++i<o;){var c=r[i],f=e?e(n[c],t[c],c,n,t):u;f===u&&(f=t[c]),a?$(n,c,f):q(n,c,f)}return n}function Tt(t){return Et(function(r,n){var e=-1,a=n.length,i=a>1?n[a-1]:u;for(i=t.length>3&&"function"==typeof i?(a--,i):u,r=Object(r);++e<a;){var o=n[e];o&&t(r,o,e,i)}return r})}function yt(t,r,n,e){if("function"!=typeof t)throw new TypeError(i);var a=r&f,u=function(t){return function(){var r=arguments,n=B(t.prototype),e=t.apply(n,r);return xt(e)?e:n}}(t);return function r(){for(var i=-1,o=arguments.length,c=-1,f=e.length,l=Array(f+o),s=this&&this!==I&&this instanceof r?u:t;++c<f;)l[c]=e[c];for(;o--;)l[c++]=arguments[++i];return s.apply(a?n:this,l)}}function ht(t){return jt(t)||Pt(t)}function gt(t,r,n){if(!xt(n))return!1;var e=typeof r;return!!("number"==e?Wt(n)&&function(t,r){var n=typeof t;return!!(r=null==r?s:r)&&("number"==n||"symbol"!=n&&k.test(t))&&t>-1&&t%1==0&&t<r}(r,n.length):"string"==e&&r in n)&&Mt(n[r],t)}function Ot(t){var r=[];if(null!=t)for(var n in Object(t))r.push(n);return r}function St(t,r,n){return r=V(r===u?t.length-1:r,0),function(){for(var e=arguments,a=-1,u=V(e.length-r,0),i=Array(u);++a<u;)i[a]=e[r+a];a=-1;for(var o=Array(r+1);++a<r;)o[a]=e[a];return o[r]=n(i),t.apply(this,o)}}var vt=nr;function dt(t){return(null==t?0:t.length)?tt(t,1):[]}function bt(t){return t&&t.length?t[0]:u}function mt(t,r,n){for(var e=null==t?0:t.length,a=((n="number"==typeof n?n<0?V(e+n,0):n:0)||0)-1,u=r==r;++a<e;){var i=t[a];if(u?i===r:i!=i)return a}return-1}function kt(t){var r=Z(t);return r.__chain__=!0,r}var Ct=function(t){return function(r,n,e){var a=Object(r);if(!Wt(r)){var i=ct(n);r=Jt(r),n=function(t){return i(a[t],t,a)}}var o=t(r,n,e);return o>-1?a[i?r[o]:o]:u}}(function(t,r,n){var e=null==t?0:t.length;if(!e)return-1;var a=null==n?0:Bt(n);return a<0&&(a=V(e+a,0)),function(t,r,n,e){for(var a=t.length,u=n+(e?1:-1);e?u--:++u<a;)if(r(t[u],u,t))return u;return-1}(t,ct(r),a)});function Nt(t,r){return Y(t,ct(r))}function It(t,r,n){return function(t,r,n,e,a){return a(t,function(t,a,u){n=e?(e=!1,t):r(n,t,a,u)}),n}(t,ct(r),n,arguments.length<3,Y)}function Kt(t,r){var n;if("function"!=typeof r)throw new TypeError(i);return t=Bt(t),function(){return--t>0&&(n=r.apply(this,arguments)),t<=1&&(r=u),n}}var Ft=Et(function(t,r,n){return yt(t,32|f,r,n)}),Ut=Et(function(t,r){return Q(t,1,r)}),wt=Et(function(t,r,n){return Q(t,zt(r)||0,n)});function Mt(t,r){return t===r||t!=t&&r!=r}var Pt=it(function(){return arguments}())?it:function(t){return Gt(t)&&P.call(t,"callee")&&!x.call(t,"callee")},jt=Array.isArray;function Wt(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=s}(t.length)&&!Lt(t)}var Dt=function(t){return Gt(t)&&at(t)==A};function Lt(t){if(!xt(t))return!1;var r=at(t);return r==y||r==h||r==p||r==S}function xt(t){var r=typeof t;return null!=t&&("object"==r||"function"==r)}function Gt(t){return null!=t&&"object"==typeof t}function Ht(t){return"number"==typeof t||Gt(t)&&at(t)==g}var Vt=function(t){return Gt(t)&&at(t)==v};function Zt(t){return"string"==typeof t||!jt(t)&&Gt(t)&&at(t)==d}var Bt=Number,zt=Number;function qt(t){return"string"==typeof t?t:null==t?"":t+""}var $t=Tt(function(t,r){At(r,H(r),t)}),Qt=Tt(function(t,r){At(r,Ot(r),t)});var Yt=Et(function(t,r){t=Object(t);var n=-1,e=r.length,a=e>2?r[2]:u;for(a&&gt(r[0],r[1],a)&&(e=1);++n<e;)for(var i=r[n],o=Xt(i),c=-1,f=o.length;++c<f;){var l=o[c],s=t[l];(s===u||Mt(s,M[l])&&!P.call(t,l))&&(t[l]=i[l])}return t});var Jt=H,Xt=Ot,tr=function(t){return vt(St(t,u,dt),t+"")}(function(t,r){return null==t?{}:function(t,r){return t=Object(t),It(r,function(r,n){return n in t&&(r[n]=t[n]),r},{})}(t,r)});function rr(t){return null==t?[]:function(t,r){return lt(r,function(r){return t[r]})}(t,Jt(t))}function nr(t){return t}var er=ct;function ar(t,r,n){var e=Jt(r),a=et(r,e);null!=n||xt(r)&&(a.length||!e.length)||(n=r,r=t,t=this,a=et(r,Jt(r)));var u=!(xt(n)&&"chain"in n&&!n.chain),i=Lt(t);return Y(a,function(n){var e=r[n];t[n]=e,i&&(t.prototype[n]=function(){var r=this.__chain__;if(u||r){var n=t(this.__wrapped__);return(n.__actions__=pt(this.__actions__)).push({func:e,args:arguments,thisArg:t}),n.__chain__=r,n}return e.apply(t,K([this.value()],arguments))})}),t}function ur(){}Z.assignIn=Qt,Z.before=Kt,Z.bind=Ft,Z.chain=kt,Z.compact=function(t){return X(t,Boolean)},Z.concat=function(){var t=arguments.length;if(!t)return[];for(var r=Array(t-1),n=arguments[0],e=t;e--;)r[e-1]=arguments[e];return K(jt(n)?pt(n):[n],tt(r,1))},Z.create=function(t,r){var n=B(t);return null==r?n:$t(n,r)},Z.defaults=Yt,Z.defer=Ut,Z.delay=wt,Z.filter=function(t,r){return X(t,ct(r))},Z.flatten=dt,Z.flattenDeep=function(t){return null!=t&&t.length?tt(t,l):[]},Z.iteratee=er,Z.keys=Jt,Z.map=function(t,r){return lt(t,ct(r))},Z.matches=function(t){return st($t({},t))},Z.mixin=ar,Z.negate=function(t){if("function"!=typeof t)throw new TypeError(i);return function(){var r=arguments;return!t.apply(this,r)}},Z.once=function(t){return Kt(2,t)},Z.pick=tr,Z.slice=function(t,r,n){var e=null==t?0:t.length;return r=null==r?0:+r,n=n===u?e:+n,e?_t(t,r,n):[]},Z.sortBy=function(t,r){var n=0;return r=ct(r),lt(lt(t,function(t,e,a){return{value:t,index:n++,criteria:r(t,e,a)}}).sort(function(t,r){return function(t,r){if(t!==r){var n=t!==u,e=null===t,a=t==t,i=r!==u,o=null===r,c=r==r;if(!o&&t>r||e&&i&&c||!n&&c||!a)return 1;if(!e&&t<r||o&&n&&a||!i&&a||!c)return-1}return 0}(t.criteria,r.criteria)||t.index-r.index}),F("value"))},Z.tap=function(t,r){return r(t),t},Z.thru=function(t,r){return r(t)},Z.toArray=function(t){return Wt(t)?t.length?pt(t):[]:rr(t)},Z.values=rr,Z.extend=Qt,ar(Z,Z),Z.clone=function(t){return xt(t)?jt(t)?pt(t):At(t,H(t)):t},Z.escape=function(t){return(t=qt(t))&&m.test(t)?t.replace(b,U):t},Z.every=function(t,r,n){return function(t,r){var n=!0;return Y(t,function(t,e,a){return n=!!r(t,e,a)}),n}(t,ct(r=n?u:r))},Z.find=Ct,Z.forEach=Nt,Z.has=function(t,r){return null!=t&&P.call(t,r)},Z.head=bt,Z.identity=nr,Z.indexOf=mt,Z.isArguments=Pt,Z.isArray=jt,Z.isBoolean=function(t){return!0===t||!1===t||Gt(t)&&at(t)==R},Z.isDate=Dt,Z.isEmpty=function(t){return Wt(t)&&(jt(t)||Zt(t)||Lt(t.splice)||Pt(t))?!t.length:!H(t).length},Z.isEqual=function(t,r){return ot(t,r)},Z.isFinite=function(t){return"number"==typeof t&&G(t)},Z.isFunction=Lt,Z.isNaN=function(t){return Ht(t)&&t!=+t},Z.isNull=function(t){return null===t},Z.isNumber=Ht,Z.isObject=xt,Z.isRegExp=Vt,Z.isString=Zt,Z.isUndefined=function(t){return t===u},Z.last=function(t){var r=null==t?0:t.length;return r?t[r-1]:u},Z.max=function(t){return t&&t.length?J(t,nr,ut):u},Z.min=function(t){return t&&t.length?J(t,nr,ft):u},Z.noConflict=function(){return I._===this&&(I._=D),this},Z.noop=ur,Z.reduce=It,Z.result=function(t,r,n){var e=null==t?u:t[r];return e===u&&(e=n),Lt(e)?e.call(t):e},Z.size=function(t){return null==t?0:(t=Wt(t)?t:H(t)).length},Z.some=function(t,r,n){return Rt(t,ct(r=n?u:r))},Z.uniqueId=function(t){var r=++j;return qt(t)+r},Z.each=Nt,Z.first=bt,ar(Z,function(){var t={};return nt(Z,function(r,n){P.call(Z.prototype,n)||(t[n]=r)}),t}(),{chain:!1}),Z.VERSION="4.17.11",Y(["pop","join","replace","reverse","split","push","shift","sort","splice","unshift"],function(t){var r=(/^(?:replace|split)$/.test(t)?String.prototype:w)[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",e=/^(?:pop|join|replace|shift)$/.test(t);Z.prototype[t]=function(){var t=arguments;if(e&&!this.__chain__){var a=this.value();return r.apply(jt(a)?a:[],t)}return this[n](function(n){return r.apply(jt(n)?n:[],t)})}}),Z.prototype.toJSON=Z.prototype.valueOf=Z.prototype.value=function(){return function(t,r){return It(r,function(t,r){return r.func.apply(r.thisArg,K([t],r.args))},t)}(this.__wrapped__,this.__actions__)},I._=Z,(a=function(){return Z}.call(r,n,r,e))===u||(e.exports=a)}).call(this)}).call(this,n(7),n(8)(t))},function(t,r,n){var e=n(4),a=n(5),u=n(6),i=Math.ceil,o=Math.max;t.exports=function(t,r,n){r=(n?a(t,r,n):void 0===r)?1:o(u(r),0);var c=null==t?0:t.length;if(!c||r<1)return[];for(var f=0,l=0,s=Array(i(c/r));f<c;)s[l++]=e(t,f,f+=r);return s}},function(t,r,n){"use strict";n.r(r);var e=n(0),a=n(2),u=n.n(a),i=n(1),o=n.n(i);let c,f;const l=["EAN-2","EAN-5","EAN-8","UPC-E","ISBN-10","UPC-A","EAN-13","ISBN-13","COMPOSITE","I2/5","DataBar","DataBar-Exp","Codabar","CODE-39","CODE-93","CODE-128","PDF417"];let s=null,E=null,_=null,p=null,R=null,A=null,T=null,y=null,h=null,g=null,O=null,S=null,v=null,d=e.STATE_RECOGNIZE,b=!1,m=null,k=null,C=null,N=[],I=!1,K=!1,F=!1,U=!1,w=[],M={},P={},j=!1;function W(t){let r;const n=c._malloc(t.length*t.BYTES_PER_ELEMENT),e=n/t.BYTES_PER_ELEMENT,a=n/t.BYTES_PER_ELEMENT+t.length;switch(t.constructor.name){case"Int16Array":r=c.HEAP16.subarray(e,a);break;case"Int32Array":r=c.HEAP32.subarray(e,a);break;case"Uint8ClampedArray":case"Uint8Array":r=c.HEAPU8.subarray(e,a);break;case"Uint16Array":r=c.HEAPU16.subarray(e,a);break;case"Uint32Array":r=c.HEAPU32.subarray(e,a);break;case"Float32Array":r=c.HEAPF32.subarray(e,a);break;case"Float64Array":r=c.HEAPF64.subarray(e,a)}return r.set(t),r}function D(){_.set([R.size.width]),p.set([R.size.height]),A.set([N[0]]),T.set([N[1]]),y.set([N[2]]),h.set([N[3]])}function L(){c._systemParamInit(A.byteOffset,T.byteOffset,y.byteOffset,h.byteOffset)}function x(){c._initObjectInformation(_.byteOffset,p.byteOffset)}function G(t){c._free(t.byteOffset)}function H(t,r){let n=[],a=[],i=[],c=u()(r,16);return o.a.map(M,t=>{t.trackFlag?(t.state=t.trackStateFlag?e.STATE_TRACK_MOVE:e.STATE_TRACK_START,t.trackStateFlag=t.trackStateFlag?t.trackStateFlag:!t.trackStateFlag):(t.state=t.trackStateFlag?e.STATE_TRACK_END:e.STATE_RECOGNIZE,t.trackStateFlag=t.trackStateFlag?!t.trackStateFlag:t.trackStateFlag)}),t.filter((t,r)=>{if(t>=0){const e=`marker_${t}`;a.push(c[r]),n.push(e),i.push(M[e].state)}}),{id:n,pose:a,state:i}}const V=()=>{const t=performance.now();switch(s?s.length!==C.data.length?(G(s),s=W(C.data)):s.set(C.data):s=W(C.data),f){case"PLANAR":1!==I[0]?(c._detectorUpdate(C.width,C.height,s.byteOffset,O.byteOffset),d=b?e.STATE_TRACK_END:e.STATE_RECOGNIZE,b=b?!b:b):(c._trackerUpdate(C.width,C.height,s.byteOffset,O.byteOffset),d=b?e.STATE_TRACK_MOVE:e.STATE_TRACK_START,b=b||!b);const r=performance.now();postMessage({cmd:e.WORKER_TRACK_SUCCESS,pose:O.toString(),trackState:d,time:r-t});break;case"QRCODE":const n=c._trackerUpdate(imgData.width,imgData.height,s.byteOffset,O.byteOffset,k.byteOffset),a=c.UTF8ToString(n);!function(t,r,n,a){let u=null,i=null,o=e.STATE_RECOGNIZE;if(!isNaN(t)&&a&&(1===t||2===t))switch(t){case 1:u=a,i="QR Code",P.trackFlag=P.uri===u,P.trackFlag?(P.state=P.trackStateFlag?e.STATE_TRACK_MOVE:e.STATE_TRACK_START,P.trackStateFlag=P.trackStateFlag?P.trackStateFlag:!P.trackStateFlag):(P.state=P.trackStateFlag?e.STATE_TRACK_END:e.STATE_RECOGNIZE,P.trackStateFlag=P.trackStateFlag?!P.trackStateFlag:P.trackStateFlag),o=P.state;break;case 2:u=a,i=l[r]}postMessage({cmd:e.WORKER_TRACK_SUCCESS,pose:n.toString(),trackState:o,detectedString:u,typeName:i})}(parseInt(m.slice(0,1),10),parseInt(m.slice(1,2),10),O,a);break;case"MARKER":c._trackerUpdate(imgData.width,imgData.height,s.byteOffset,g.byteOffset,S.byteOffset),o.a.map(M,t=>{t.trackFlag=!1});const u=o.a.filter(g,t=>t>=0).map(t=>`marker_${t}`);for(let t in u)M[u[t]].trackFlag=!0;const i=H(g,S);postMessage({cmd:e.WORKER_TRACK_SUCCESS,pose:i.pose,marker:i.id,trackState:i.state})}j||("function"==typeof requestAnimationFrame?requestAnimationFrame(V):setTimeout(V,15))};function Z(t){E?E.length!==t.data.length?(G(E),E=W(t.data)):E.set(t.data):E=W(t.data),c._registerRefImg(t.width,t.height,E.byteOffset,U.byteOffset),postMessage({cmd:e.WORKER_SUCCESS_SET_REFERENCE,result:!0}),U[0]=1,V()}onmessage=(t=>{switch(t.data.cmd){case"selectWorker":!function(t){switch(f=t,t){case"QRCODE":importScripts("https://s3.ap-northeast-2.amazonaws.com/letsee-dev/webar/qrcode_tracker.min.js"),QrTracker({onRuntimeInitialized(){}}).then(r=>{c=r,postMessage({cmd:e.WORKER_ON_RUNTIME_INITIALIZED,type:t})});break;case"MARKER":importScripts("https://s3.ap-northeast-2.amazonaws.com/letsee-dev/webar/marker_tracker.min.js"),MarkerTracker({onRuntimeInitialized(){}}).then(r=>{c=r,postMessage({cmd:e.WORKER_ON_RUNTIME_INITIALIZED,type:t})});break;case"PLANAR":importScripts("https://s3.ap-northeast-2.amazonaws.com/letsee-dev/webar/planar_tracker.min.js"),LetseeTracker({onRuntimeInitialized(){}}).then(r=>{c=r,postMessage({cmd:e.WORKER_ON_RUNTIME_INITIALIZED,type:t})})}}(t.data.type);break;case e.WORKER_UPDATE_INFORMATION:R=t.data.entity,N=t.data.parameter,t.data.markerList&&t.data.markerList.length&&"MARKER"===f?(w=[...t.data.markerList],M=function(t){let r=o.a.map(t,t=>t.replace("marker_",""));r.length<5&&(r=[...r,...Array(5-r.length).fill(-1)]),(v=W(new Int32Array(5))).set(r),c._markerArrayInit(v.byteOffset);let n={};return o.a.forEach(t,t=>{n[t]={pose:Array(16).fill(-1),state:e.STATE_RECOGNIZE,trackStateFlag:!1,trackFlag:!1}}),n}(w)):"QRCODE"===f&&(P=function(t){return{state:e.STATE_RECOGNIZE,trackStateFlag:!1,trackFlag:!1,uri:t}}("http://www.letsee.io/"));break;case e.WORKER_SET_REFERENCE_IMAGE:"PLANAR"===f?Z(t.data.img_data):(U[0]=1,postMessage({cmd:e.WORKER_SUCCESS_SET_REFERENCE,result:!0}));break;case e.WORKER_PROCESS_FRAME:U[0]?(j=!1,V()):postMessage({cmd:e.WORKER_POST_NULL});break;case e.WORKER_AUTH:_=W(new Float64Array(1)),p=W(new Float64Array(1)),K=W(new Uint8Array(1)),F=W(new Uint8Array(1)),I=W(new Uint8Array(1)),U=W(new Uint8Array(1)),A=W(new Float64Array(1)),T=W(new Float64Array(1)),y=W(new Float64Array(1)),h=W(new Float64Array(1)),g=W(new Int32Array(5)),O=W(new Float64Array(16)),S=W(new Float64Array(80)),g.set(Array(5).fill(-1)),O.set(Array(16).fill(-1)),S.set(Array(80).fill(-1)),(k=W(new Int32Array(5))).set(Array(5).fill(-1)),(m=W(new Int32Array(2))).set(Array(2).fill(0)),D(),c._initApplication(F.byteOffset,K.byteOffset,I.byteOffset),L(),x(),function(t){c._authentication(c.allocate(c.intArrayFromString(t),"i8",c.ALLOC_NORMAL));let r=0;const n=setInterval(function(){postMessage({cmd:e.WORKER_AUTH_RESULT,result:"pending"}),1===K[0]&&(postMessage({cmd:e.WORKER_AUTH_RESULT,result:"success"}),clearInterval(n)),0===K[0]&&(postMessage({cmd:e.WORKER_AUTH_RESULT,result:"fail"}),clearInterval(n)),r>100&&(postMessage({cmd:e.WORKER_AUTH_RESULT,result:"timeout"}),clearInterval(n)),r++},100)}(t.data.appKey);break;case e.WORKER_TEST:console.log("[WORKER] worker test call");break;case e.WORKER_UPDATE_REFERENCE_IMAGE:I.set([0]),D(),x(),Z(t.data.img_data);break;case e.WORKER_UPDATE_FRAME:j=!0,I.set([0]),N=t.data.parameter,D(),L();break;case"updateScean":if(void 0===t.data.img_data||null===t.data.img_data||0===t.data.img_data.data.length)throw new Error("No frame data");C=t.data.img_data}})},function(t,r){t.exports=function(t,r,n){var e=-1,a=t.length;r<0&&(r=-r>a?0:a+r),(n=n>a?a:n)<0&&(n+=a),a=r>n?0:n-r>>>0,r>>>=0;for(var u=Array(a);++e<a;)u[e]=t[e+r];return u}},function(t,r){t.exports=function(){return!1}},function(t,r){t.exports=function(t){return t}},function(t,r){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,r){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}}]);',null)}},function(t,e,n){"use strict";var r=window.URL||window.webkitURL;t.exports=function(t,e){try{try{var n;try{(n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(t),n=n.getBlob()}catch(e){n=new Blob([t])}return new Worker(r.createObjectURL(n))}catch(e){return new Worker("data:application/javascript,"+encodeURIComponent(t))}}catch(t){if(!e)throw Error("Inline worker is not supported");return new Worker(e)}}},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.HTTP="&@http@;",this.HTTPS="&@https@;",this.PROPERTY_TARGET="-letsee-target",this.PROPERTY_POSITION="-letsee-position",this.dataMap={}}return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(t,[{key:"parse",value:function(){this.dataMap={};for(var e=document.getElementsByTagName("style"),n=0;n<e.length;n+=1){var r=e[n];if("place"===r.media){var i=t.removeAnnotations(r.innerHTML);this.parseData(i),t.removeMedia(r)}}return Object.values(this.dataMap)}},{key:"parseData",value:function(e){for(var n=e.split("}"),r=0;r<n.length-1;r+=1){for(var i=n[r].split("{"),a=i[0].trim(),o=i[1].split(";"),s=null,u={selector:a,pose:[0,0,0]},c=0;c<o.length-1;c+=1){var l=o[c],h=l.indexOf(":"),f=l.substring(0,h).trim(),d=l.substring(h+1).trim();if(f===this.PROPERTY_TARGET){var p=t.parseTarget(d);s={type:p[0],uri:p[1]}}else if(f===this.PROPERTY_POSITION){var y=t.parsePosition(d),m=y[0],v=y[1].split(",");u.pose=[parseFloat(v[0]),parseFloat(v[1]),parseFloat(v[2])],"geo"===m&&(s={type:"geo",uri:"geolocation"})}}if(s){this.dataMap[s.uri]||(this.dataMap[s.uri]={entity:s,renderables:[]});var _=this.dataMap[s.uri];_.entity=s,_.renderables.push(u)}}}}],[{key:"removeAnnotations",value:function(t){for(var e,n,r=t;-1!==e;){e=r.indexOf("/*"),n=r.indexOf("*/");var i=r.substring(e,n+2);r=r.replace(i,"")}return r}},{key:"parseTarget",value:function(t){var e=t.indexOf("(")+1,n=t.indexOf(")"),r=(t.substring(0,e-1).trim(),t.substring(e,n).replace(/"/g,"").replace(/'/g,"")),i=t.substring(n+1,t.length).trim();return""!==i&&" "!==i||(i="object"),[i,r]}},{key:"parsePosition",value:function(t){var e=t.indexOf("(")+1,n=t.indexOf(")");return[t.substring(0,e-1).trim(),t.substring(e,n).replace(/"/g,"").replace(/'/g,"")]}},{key:"getBase",value:function(){var t=window.location.href.split("/");t[t.length-1].indexOf(".html")>-1&&t.pop();var e=t.join("/");return"/"!==e.substr(e.length-1)&&(e+="/"),e}},{key:"removeMedia",value:function(t){var e=document.getElementsByTagName("head")[0],n=document.createElement("style");n.setAttribute("type","text/css"),n.appendChild(document.createTextNode(t.innerHTML)),e.replaceChild(n,t)}}]),t}());e.default=i,t.exports=e.default},function(t,e,n){var r=n(16);t.exports=function(t,e){return!(null==t||!t.length)&&r(t,e,0)>-1}},function(t,e,n){var r=n(16),i=n(30),a=Math.max;t.exports=function(t,e,n){var o=null==t?0:t.length;if(!o)return-1;var s=null==n?0:i(n);return s<0&&(s=a(o+s,0)),r(t,e,s)}},function(t,e){t.exports=function(t){return t}},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=null,o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a||(a=this),this.entityList=[],this.entityState=[],this.markerList=[],this.codeList=[]}return function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(t,[{key:"initEntity",value:function(t){var e=this,n=[];return this.entityList=t.map(function(t){var e=[];return e.push(t.entity.uri),e}),this.entityList.forEach(function(t,r,i){n.push(fetch(t).then(function(t){return t.json()}).then(function(t){var r={entity:{uri:t.uri,letseeMarkerId:t.letseeMarkerId||null,codeString:t.codeString||null,name:t.name||null,image:t.image||null,size:{width:t.size.width||0,height:t.size.height||0,depth:t.size.height||0,unit:t.size.unit||"mm"}},pixelSize:{width:t.size.width||0,height:t.size.height||0,depth:t.size.height||0,unit:t.size.unit||"mm"},scale:t.scale||1};e.entityState.push(e.parseEntity(r)),null!==r.entity.letseeMarkerId&&e.markerList.push(r.entity.letseeMarkerId),null!==r.entity.codeString&&e.codeList.push(r.entity.codeString),n.push(e.entityState)}).catch(function(t){console.log(t)}))}),new Promise(function(t,r){Promise.all(n).then(function(){t(e.entityState)})})}},{key:"parseEntity",value:function(t){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){r(t,e,n[e])})}return t}({},{entity:{type:"object",uri:null,letseeMarkerId:null,codeString:null,name:null,image:null,size:{width:null,height:null,depth:0,unit:"mm"}},pixelSize:{width:null,height:null,depth:null,unit:"px"},scale:null},t)}}]),t}();e.default=o,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n(33);var r,i=c(n(9)),a=c(n(12)),o=c(n(36)),s=c(n(11)),u=(c(n(5)),n(38));function c(t){return t&&t.__esModule?t:{default:t}}function l(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var d={},p=new a.default,y=new o.default,m=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r)return r;d=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){h(t,e,n[e])})}return t}({},e),i.default.setConfig(d),this.camera=new(Function.prototype.bind.apply(u.PerspectiveCamera,[null].concat(l(d.projectionParameter)))),p.initRenderer(this.camera),p.orientation=d.orientation,y.renderer=p,e.isSteady&&!0===e.isSteady&&(y.isSteady=e.isSteady),s.default.setDatas(d.data);var n=document.body.style;n.margin=0,n.padding=0,document.getElementsByTagName("html")[0].removeAttribute("style"),r=this}return function(t,e,n){e&&f(t.prototype,e),n&&f(t,n)}(t,[{key:"onConfigurationChanged",value:function(t){i.default.setConfig(t),p.orientation=i.default.orientation,y.flushPoseCache()}},{key:"getEntity",value:function(t){return s.default.getEntity(t)}},{key:"objectTracker",get:function(){return y}},{key:"domRenderer",get:function(){return p}}]),t}();e.default=m,t.exports=e.default},function(t,e,n){"use strict";var r=n(2),i=n(0),a=n(34),o=n(3),s=n(6),u=f(n(7)),c=f(n(8)),l=f(n(10)),h=f(n(19));function f(t){return t&&t.__esModule?t:{default:t}}window.Euler=s.Euler,window.Quaternion=o.Quaternion,window.Matrix4=r.Matrix4,window.Vector2=a.Vector2,window.Vector3=i.Vector3,window.Object3D=u.default,window.Entity=c.default,window.EntityEvent=l.default,window.DOMRenderable=h.default},function(t,e,n){"use strict";function r(t,e){this.x=t||0,this.y=e||0}n.r(e),n.d(e,"Vector2",function(){return r}),Object.defineProperties(r.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(r.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,a=this.y-t.y;return this.x=i*n-a*r+t.x,this.y=i*r+a*n+t.y,this}})},function(t,e,n){"use strict";n.r(e),n.d(e,"Scene",function(){return i});var r=n(4);function i(){r.Object3D.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}i.prototype=Object.assign(Object.create(r.Object3D.prototype),{constructor:i,isScene:!0,copy:function(t,e){return r.Object3D.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=r.Object3D.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},dispose:function(){this.dispatchEvent({type:"dispose"})}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=p(n(8)),i=n(2),a=n(0),o=n(3),s=n(6),u=n(1),c=p(n(11)),l=p(n(10)),h=p(n(18)),f=p(n(5)),d=p(n(37));function p(t){return t&&t.__esModule?t:{default:t}}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var m=u._Math.degToRad(1),v=new a.Vector3,_=new o.Quaternion,g=new s.Euler,b=new i.Matrix4,E=!1,w=new d.default(100),x=new d.default(100),S=new d.default(100),T=new d.default(100),M=new d.default(100),R=new d.default(100),O=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.targets={}}return function(t,e,n){e&&y(t.prototype,e),n&&y(t,n)}(t,[{key:"isTracking",value:function(t){if(t){if(this.targets[t])return!0}else if(Object.keys(this.targets).length>0)return!0;return!1}},{key:"getTarget",value:function(t){return this.targets[t]}},{key:"addTarget",value:function(t){var e=t.uri;this.targets[e]=t}},{key:"removeTarget",value:function(t){var e=t.uri;delete this.targets[e]}},{key:"clear",value:function(){for(var t=Object.values(this.targets),e=0;e<t.length;e++){var n=t[e];this.onTrackEnd(new l.default("trackend",n),!0)}this.targets={}}},{key:"updateState",value:function(t){if(void 0!==t&&0!==t.length)for(var e=0,n=t.length;e<n;e+=1){var a=t[e],o=a.entity,s=c.default.getEntity(o.uri);s||(s=new r.default(o.uri,o)),s.setData(o);var u=(new i.Matrix4).fromArray(a.matrix),f=new l.default(a.type,s,u,a.pixelSize,a.scale);f&&(a.type===h.default.TRACK_START?this.onTrackStart(f):a.type===h.default.TRACK_MOVE?this.onTrackMove(f):a.type===h.default.TRACK_END&&this.onTrackEnd(f))}else this.clear()}},{key:"onTrackStart",value:function(t){var e=t.target;e.track=!0,this.addTarget(e),"unknown"!==e.uri&&(e.scale=t.scale,f.default.dispatchEvent("trackstart",t))}},{key:"onTrackMove",value:function(t){var e=t.target,n=(new o.Quaternion).setFromRotationMatrix(t.matrix),r=(new a.Vector3).setFromMatrixPosition(t.matrix),i=(new s.Euler).setFromQuaternion(n);E&&(w.push(Date.now(),r.x),x.push(Date.now(),r.y),S.push(Date.now(),r.z),T.push(Date.now(),i._x),M.push(Date.now(),i._y),R.push(Date.now(),i._z)),v.length(r)?E?(v.x=w.forecast(),v.y=x.forecast(),v.z=S.forecast(),g._x=T.forecast(),g._y=M.forecast(),g._z=R.forecast()):(Math.abs(g._x-i._x)>m&&(g._x=i._x),Math.abs(g._y-i._y)>m&&(g._y=i._y),Math.abs(g._z-i._z)>m&&(g._z=i._z),Math.abs(v.x-r.x)>3&&(v.x=r.x),Math.abs(v.y-r.y)>3&&(v.y=r.y),Math.abs(v.z-r.z)>3&&(v.z=r.z)):(v.copy(r),_.copy(i),g.copy(i),b.copy(t.matrix)),e.object.matrix.makeRotationFromQuaternion((new o.Quaternion).setFromEuler(g)),e.object.matrix.setPosition(v),e.object.matrixAutoUpdate=!1,e.object.updateMatrixWorld(!0),"unknown"!==e.uri&&f.default.dispatchEvent("trackmove",t)}},{key:"onTrackEnd",value:function(t){var e=t.target;e.track=!1,this.removeTarget(e),this.flushPoseCache(),"unknown"!==e.uri&&f.default.dispatchEvent("trackend",t)}},{key:"flushPoseCache",value:function(){v.set(0,0,0),_.set(0,0,0,1),g.set(0,0,0),w=null,x=null,S=null,T=null,M=null,R=null,w=new d.default(100),x=new d.default(100),S=new d.default(100),T=new d.default(100),M=new d.default(100),R=new d.default(100)}},{key:"isSteady",get:function(){return E},set:function(t){if("boolean"!=typeof t)throw new Error("Value must be boolean");E=t}},{key:"count",get:function(){return Object.keys(this.targets).length}}]),t}();e.default=O,t.exports=e.default},function(t,e,n){"use strict";const r=Math.exp;t.exports=function(t){if("number"!=typeof t)throw new Error("must provide a timespan to the moving average constructor");if(t<=0)throw new Error("must provide a timespan > 0 to the moving average constructor");let e,n,i=0,a=0,o=0,s={};return s.push=function(s,u){if(n){const c=function(e,n){return 1-r(-(e-n)/t)}(s,n),l=u-e;e=c*u+(1-c)*e,i=(1-c)*(i+l*(c*l)),a=Math.sqrt(i),o=e+c*l}else e=u;n=s},s.movingAverage=function(){return e},s.variance=function(){return i},s.deviation=function(){return a},s.forecast=function(){return o},s}},function(t,e,n){"use strict";n.r(e);var r=n(2),i=n(4),a=n(0);function o(){i.Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new r.Matrix4,this.projectionMatrix=new r.Matrix4,this.projectionMatrixInverse=new r.Matrix4}o.prototype=Object.assign(Object.create(i.Object3D.prototype),{constructor:o,isCamera:!0,copy:function(t,e){return i.Object3D.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new a.Vector3),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){i.Object3D.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}});var s=n(1);function u(t,e,n,r){o.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}n.d(e,"PerspectiveCamera",function(){return u}),u.prototype=Object.assign(Object.create(o.prototype),{constructor:u,isPerspectiveCamera:!0,copy:function(t,e){return o.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*s._Math.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*s._Math.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*s._Math.RAD2DEG*Math.atan(Math.tan(.5*s._Math.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,r,i,a){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*s._Math.DEG2RAD*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,u=a.fullHeight;i+=a.offsetX*r/o,e-=a.offsetY*n/u,r*=a.width/o,n*=a.height/u}var c=this.filmOffset;0!==c&&(i+=t*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=i.Object3D.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}})}])});